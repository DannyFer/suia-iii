<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:mae="http://java.sun.com/jsf/composite/mae-composite" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:t="http://myfaces.apache.org/tomahawk">

<f:loadBundle var="helps" basename="ec.gob.ambiente.core.resources.helps_es" />
<h:form id="formEntries">
	<p:dialog header="Entrada de configuraciÃ³n" id="adicionarEntry" widgetVar="adicionarEntry" modal="true" resizable="false" width="600">
		<h:panelGroup id="datosEntry">
			<h:panelGrid styleClass="w100 separatorBottom" columns="1">
				<p:outputLabel for="clave" value="Clave" />
				<p:inputTextarea id="clave" value="#{configuracionesBean.configEntry.key}" styleClass="w100" required="true" rows="2" autoResize="false" />
				<h:outputText />
				<p:outputLabel for="valor" value="Valor" />
				<p:inputTextarea id="valor" value="#{configuracionesBean.configEntry.value}" styleClass="w100" required="true" rows="2" autoResize="false" />
			</h:panelGrid>
		</h:panelGroup>

		<div class="buttons">
			<p:commandButton rendered="#{!configuracionesBean.edit}" value="Aceptar" update=":form" actionListener="#{configuracionesController.saveConfigEntry()}" oncomplete="handleConfigEntriesRequest(xhr, status, args)" />
			<p:commandButton rendered="#{configuracionesBean.edit}" value="Actualizar" update=":form" actionListener="#{configuracionesController.updateConfigEntry()}" oncomplete="handleConfigEntriesRequest(xhr, status, args)" />
		</div>

		<script type="text/javascript">
        function handleConfigEntriesRequest(xhr, status, args) {
            if (args.validationFailed || !args.entry) {
            	PF('adicionarEntry').show();
            }
            else {
                PF('adicionarEntry').hide();
            }
        }
    </script>
	</p:dialog>
</h:form>
</html>