<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/WEB-INF/templates/default-task.xhtml"
	xmlns:p="http://primefaces.org/ui">
	<ui:define name="content">
		<style type="text/css">
			.qutarBordeGrid.ui-panelgrid>*>tr,.qutarBordeGrid.ui-panelgrid .ui-panelgrid-cell {
				border: none;
			}
		</style>
	<ui:include src="contenido/menu.xhtml" />
		<div class="content">
			<f:facet name="header">
				<h:outputText value="&nbsp;&nbsp;&nbsp; Datos de la Actividad" />
			</f:facet>
			<p:panel  header="PARTICIPACIÓN CIUDADANA" >
			<h:form id="frmParticipacion">
					<p:panelGrid columns="2" styleClass="qutarBordeGrid"  columnClasses="header w40,null w70" rendered="true">
						<h:outputText value="Información Participación ciudadana" for="txtNumCedula" />
						<h:panelGroup>
			                      <p:commandButton oncomplete="PF('dlg_verDocumentos').show();" update="pnl_documentos" icon="ui-icon-disk" value="Descargar" styleClass="primary" />
						</h:panelGroup>
					</p:panelGrid>
					<br/>
					<p:outputPanel id="pnlPPCObligatoprio">
						<p:outputLabel value="OBLIGATORIO: #{participacionCiudadanaRcoaController.mensajeObligatorio}" />
						<p:panelGrid id="pnlDocumentos" columns="3" layout="grid" styleClass="qutarBordeGrid" columnClasses="w20, w25, field_mrg w30" >
		              		<p:outputLabel value="1.- Carteles Informativos"/>
							<p:fileUpload id="docCarteles" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="" mode="advanced" dragDropSupport="false" skinSimple="true" 
								auto="true" required="true" update="pnlDocumentos" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoCarteles}" />	
							</p:fileUpload>				
							<p:commandButton id="downloadCarteles"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoCarteles.nombre ne null}">
								<p:fileDownload value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoCarteles)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoCarteles.nombre eq null}"/>	
								
		              		<p:outputLabel value="2.- Acta de apertura y cierre del centro de información pública"/>
							<p:fileUpload id="docAutorizacion" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentos" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoActaApertura}" />
							</p:fileUpload>
							<p:commandButton id="downloadAutorizacion"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoActaApertura.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoActaApertura)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoActaApertura.nombre eq null}"/>
		
		              		<p:outputLabel value="3.- Registro de Asistencia y Observaciones en el Centro de información pública"/>
							<p:fileUpload id="docObservaciones" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentos" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoRegistroAsistencia}" />
							</p:fileUpload>
							<p:commandButton id="downloadObservaciones"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoRegistroAsistencia.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoRegistroAsistencia)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoRegistroAsistencia.nombre eq null}"/>
		
		              		<p:outputLabel value="4.- Informe de Sistematizaciòn de PPC"/>
							<p:fileUpload id="docSistematizacion" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentos" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoInformeSistematizado}" />
							</p:fileUpload>
							<p:commandButton id="downloadSistematizacion"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoInformeSistematizado.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoInformeSistematizado)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoInformeSistematizado.nombre eq null}"/>
		
		                  </p:panelGrid>
					</p:outputPanel>
					<br/><br/>
					<p:outputPanel id="pnlPPCOpcional">
					<p:outputLabel value="OPCIONAL: #{participacionCiudadanaRcoaController.mensajeopcional}" />
			          	<p:panelGrid id="pnlDocumentosOpcional" columns="3" layout="grid" styleClass="qutarBordeGrid" columnClasses="w20, w25, field_mrg w30" >
		              		<p:outputLabel value="1.- Invitación Personal"/>
							<p:fileUpload id="docInvitacion" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentosOpcional" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoInvitacion}" />	
							</p:fileUpload>
							<p:commandButton id="downloadInvitacion"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoInvitacion.nombre ne null}">
								<p:fileDownload value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoInvitacion)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoInvitacion.nombre eq null}"/>	
								
		              		<p:outputLabel value="2.- Acta para Asamblea de presentación pública"/>
							<p:fileUpload id="docActaAsamblea" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentosOpcional" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoActaAsamblea}" />
							</p:fileUpload>
							<p:commandButton id="downloadActaAsamblea"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoActaAsamblea.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoActaAsamblea)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoActaAsamblea.nombre eq null}"/>
		
		              		<p:outputLabel value="3.- Registro de Asistencia a la Asamblea de Presentación Pública"/>
							<p:fileUpload id="docRegistroAsamblea" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(pdf)$/"
								label="Seleccionar (pdf 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentosOpcional" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoRegistroAsamblea}" />
							</p:fileUpload>
							<p:commandButton id="downloadRegistroAsamblea"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoRegistroAsamblea.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoRegistroAsamblea)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoRegistroAsamblea.nombre eq null}"/>
		
		              		<p:outputLabel value="4.- Audio de la Asamblea de Presentación Pública (.mp3)"/>
							<p:fileUpload id="docAudioAsamblea" disabled="#{marcoLegalReferencialController.habilitarIngreso}"
								fileUploadListener="#{participacionCiudadanaRcoaController.uploadFileDocumento}"
								multiple="false" sizeLimit="20971520" allowTypes="/(\.|\/)(mp3)$/"
								label="Seleccionar (mp3 20Mb)" uploadLabel="Subir"
								invalidFileMessage="Tipo de archivo no válido"
								invalidSizeMessage="Debe adjuntar un archivo no mayor de 20 Mb."
								cancelLabel="Cancelar" mode="advanced" dragDropSupport="false"
								auto="true" required="true" update="pnlDocumentosOpcional" >
								<f:attribute name="tipoDocumento" value="#{participacionCiudadanaRcoaController.documentoAudioAsamblea}" />
							</p:fileUpload>
							<p:commandButton id="downloadAudioAsamblea"
								icon="ui-icon-arrowthick-1-s"
								styleClass="button-small primary toLeft" title="Ver" ajax="false"
								immediate="true"
								rendered="#{participacionCiudadanaRcoaController.documentoAudioAsamblea.nombre ne null}">
								<p:fileDownload
									value="#{descargarDocumentosCoaController.descargarDocumento(participacionCiudadanaRcoaController.documentoAudioAsamblea)}" />
							</p:commandButton>
							<p:outputLabel value="" rendered="#{participacionCiudadanaRcoaController.documentoAudioAsamblea.nombre eq null}"/>
		
		                  </p:panelGrid>
					</p:outputPanel>
					
					<p:outputPanel id="pnlPPCBtn">
						<div class="buttons main">
							<p:commandButton value="Atrás" icon="ui-icon-arrowthick-1-w"
								action="#{registroAmbientalController.atras()}" update=":frmParticipacion"
								styleClass="wizard-custom-btn-back" process="@this" />
							<p:commandButton value="Guardar" id="btnGuardar"	icon="ui-icon-disk"	immediate="true" update=":#{p:component('pnlPPCBtn')}"
								disabled="#{marcoLegalReferencialController.habilitarIngreso}"		
								action="#{participacionCiudadanaRcoaController.guardar()}" />
							<p:commandButton value="Siguiente" id="btnSiguiente" immediate="true" disabled="#{!participacionCiudadanaRcoaController.validarDatos and !marcoLegalReferencialController.habilitarIngreso}"
								process="@this" 
								action="#{registroAmbientalController.siguiente()}" update=":frmParticipacion"
								icon="ui-icon-arrowthick-1-e" />
						</div>
					</p:outputPanel>
					
						<p:dialog header="Plantillas información participación ciudadana" widgetVar="dlg_verDocumentos" modal="true" width="700">
							<h:panelGrid columns="2" columnClasses="w75 alTop,field_mrg alTop" id="pnl_documentos">
								<h:outputText value="#{participacionCiudadanaRcoaController.acta_apertura_cierre}" rendered="#{participacionCiudadanaRcoaController.acta_apertura_cierre ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.acta_apertura_cierre ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('acta_apertura_cierre_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.convocatoria}" rendered="#{participacionCiudadanaRcoaController.convocatoria ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.convocatoria ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('convocatoria_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.asistencia_asamblea}" rendered="#{participacionCiudadanaRcoaController.asistencia_asamblea ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.asistencia_asamblea ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('asistencia_asamblea_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.sistematizacion_ppc}" rendered="#{participacionCiudadanaRcoaController.sistematizacion_ppc ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.sistematizacion_ppc ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('sistematizacion_ppc_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.invitacion_personal}" rendered="#{participacionCiudadanaRcoaController.invitacion_personal ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.invitacion_personal ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('invitacion_personal_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.acta_asamblea_presentacion}" rendered="#{participacionCiudadanaRcoaController.acta_asamblea_presentacion ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.acta_asamblea_presentacion ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('acta_asamblea_presentacion_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.asistencia_observaciones}" rendered="#{participacionCiudadanaRcoaController.asistencia_observaciones ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.asistencia_observaciones ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('asistencia_observaciones_byte')}" />
								</p:commandButton>
								
								<h:outputText value="#{participacionCiudadanaRcoaController.aplicacion_ppc}" rendered="#{participacionCiudadanaRcoaController.aplicacion_ppc ne ''}"/>
								<p:commandButton ajax="false"  icon="ui-icon-search" styleClass="button-small primary" title="" rendered="#{participacionCiudadanaRcoaController.aplicacion_ppc ne ''}">
										<p:fileDownload value="#{participacionCiudadanaRcoaController.getPlantillaComponente('aplicacion_ppc_byte')}" />
								</p:commandButton>
								
							</h:panelGrid>
							<p:separator />
							<div class="buttons">
								<p:commandButton type="button" value="Cerrar" onclick="PF('dlg_verDocumentos').hide()" />
							</div>
						</p:dialog>
			</h:form>
					<ui:include src="/pages/rcoa/registroAmbiental/popupFases.xhtml" />
				</p:panel>
		</div>
		
		<div class="clear"></div>
	</ui:define>
</ui:composition>
