<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:mae-components="http://ec.gob.ambiente/mae-components" xmlns:mae="http://java.sun.com/jsf/composite/mae-composite">

<ui:composition template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h:form>

			<p:panel header="Plan de Cierre y Abandono para el proyecto: #{verPlanCierreBean.planCierreBean.planCierre.proyecto}" rendered="#{!planCierreBean.viewPanelPoint10}">
				<h:panelGrid columns="3" styleClass="w100" columnClasses="bold, field_mrg_x2, field_mrg_x2">
					<h:outputText />
					<h:outputText />
					<h:outputText value="¿Aprueba la información ingresada?" />

					<h:outputText value="#{planCierreBean.labelsToStrings['antecedentes']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['antecedentes'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="antecedentes" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_antecedentes" nombre="#{planCierreBean.labelsToStrings['antecedentes']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['antecedentes']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['objetivos']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['objetivos'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="objetivos" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_objetivos" nombre="#{planCierreBean.labelsToStrings['objetivos']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['objetivos']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['datosGenerales']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['datosGenerales'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="datosGenerales" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_datosGenerales" nombre="#{planCierreBean.labelsToStrings['datosGenerales']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['datosGenerales']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['alcance']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['alcance'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="alcance" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_alcance" nombre="#{planCierreBean.labelsToStrings['alcance']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['alcance']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['marcoLegal']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['marcoLegal'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="marcoLegal" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_marcoLegal" nombre="#{planCierreBean.labelsToStrings['marcoLegal']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['marcoLegal']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['descripcionActividades']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['descripcionActividades'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="descripcionActividades" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_descripcionActividades" nombre="#{planCierreBean.labelsToStrings['descripcionActividades']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['descripcionActividades']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['descripcionArea']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['descripcionArea'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="descripcionArea" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_descripcionArea" nombre="#{planCierreBean.labelsToStrings['descripcionArea']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['descripcionArea']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['diagnostico']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['diagnostico'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="diagnostico" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_diagnostico" nombre="#{planCierreBean.labelsToStrings['diagnostico']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['diagnostico']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['identificacion']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['identificacion'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="identificacion" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_identificacion" nombre="#{planCierreBean.labelsToStrings['identificacion']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['identificacion']}" />

					<h:outputText value="10. Actividades de Cierre o Abandono" />
					<p:commandButton value="Revisar punto 10" process="@this" actionListener="#{planCierreBean.toggleviewPanelPoint10()}" update="@form" />
					<h:outputText />

					<h:outputText value="#{planCierreBean.labelsToStrings['anexos']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['anexos'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="anexos" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion_anexos" nombre="#{planCierreBean.labelsToStrings['anexos']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['anexos']}" />
				</h:panelGrid>
			</p:panel>

			<p:panel header="10. Actividades de Cierre o Abandono" styleClass="mainPanel" rendered="#{planCierreBean.viewPanelPoint10}">
				<f:facet name="actions">
					<p:commandLink process="@this" actionListener="#{planCierreBean.toggleviewPanelPoint10()}" update="@form" styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default">
						<h:outputText styleClass="ui-icon ui-icon-close" />
					</p:commandLink>
				</f:facet>
				<h:panelGrid columns="3" styleClass="w100" columnClasses="bold w50, field_mrg_x2, field_mrg_x2">
					<h:outputText value="#{planCierreBean.labelsToStrings['_10_equiposEstructuras']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['_10_equiposEstructuras'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="_10_equiposEstructuras" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion__10_equiposEstructuras" nombre="#{planCierreBean.labelsToStrings['_10_equiposEstructuras']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['_10_equiposEstructuras']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['_10_desechos']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['_10_desechos'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="_10_desechos" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion__10_desechos" nombre="#{planCierreBean.labelsToStrings['_10_desechos']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['_10_desechos']}" />
				</h:panelGrid>
				<p:separator />

				<mae-components:readOnly>
					<h:panelGrid columns="2">
						<h:outputText value="Tipo de abandono" />
						<p:selectOneMenu value="#{planCierreBean.planCierre.abandonoTemporal}">
							<f:selectItem itemLabel="Temporal" itemValue="true" />
							<f:selectItem itemLabel="Definitivo" itemValue="false" />
						</p:selectOneMenu>
					</h:panelGrid>
				</mae-components:readOnly>
				<p:separator />

				<h:panelGrid columns="3" styleClass="w100 separatorTop" columnClasses="bold w50, field_mrg_x2, field_mrg_x2">
					<h:outputText value="#{planCierreBean.labelsToStrings['_10_reduccionDrenajes']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['_10_reduccionDrenajes'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="_10_reduccionDrenajes" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion__10_reduccionDrenajes" nombre="#{planCierreBean.labelsToStrings['_10_reduccionDrenajes']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['_10_reduccionDrenajes']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['_10_detallesMuestreo']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['_10_detallesMuestreo'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="_10_detallesMuestreo" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion__10_detallesMuestreo" nombre="#{planCierreBean.labelsToStrings['_10_detallesMuestreo']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['_10_detallesMuestreo']}" />

					<h:outputText value="#{planCierreBean.labelsToStrings['_10_otros']}" />
					<p:commandLink value="Total de archivos adjuntos: #{planCierreBean.files['_10_otros'].size()}" oncomplete="PF('viewFiles').show()" update="tablaVerAdjuntos" styleClass="linkFiles">
						<f:setPropertyActionListener value="_10_otros" target="#{planCierreBean.fileKey}" />
					</p:commandLink>
					<mae:comentarioEntidad seccion="seccion__10_otros" nombre="#{planCierreBean.labelsToStrings['_10_otros']}" comentario="#{verPlanCierreBean.comentariosPlanCierre['_10_otros']}" />
				</h:panelGrid>
			</p:panel>
			<p:separator />

			<p:panel header="10. Actividades de Cierre o Abandono" styleClass="mainPanel" rendered="#{planCierreBean.viewPanelPoint10}">
				<h:panelGrid columns="2" columnClasses="bold, field_mrg_x2">
					<h:outputText value="Sobre la realización de inspección determino que:" />
					<p:selectOneMenu value="#{planCierreBean.planCierre.requiereInspeccion}">
						<f:selectItem itemLabel="Sí requiere" itemValue="true" />
						<f:selectItem itemLabel="No requiere" itemValue="false" />
					</p:selectOneMenu>
				</h:panelGrid>
			</p:panel>

			<p:separator />
			<div class="buttons">
				<p:commandButton value="Aceptar" action="#{recibirPlanCierreController.aceptar()}" />
				<p:commandButton value="Cancelar" action="#{recibirPlanCierreController.cancelar()}" />
			</div>

			<p:dialog minWidth="150" id="tablaVerAdjuntos" styleClass="tablaVerAdjuntos" header="Archivos adjuntos" widgetVar="viewFiles" modal="true" resizable="false">
				<h:dataTable value="#{planCierreBean.files[planCierreBean.fileKey]}" var="file">
					<h:column>
						<h:outputText value="#{file.fileName}" />
					</h:column>
					<h:column style="text-align: center; padding-left:10px;">
						<p:commandButton icon="ui-icon-search" ajax="false" styleClass="buttonDownloadFiles">
							<p:fileDownload value="#{planCierreBean.getFileToDownload(file)}" />
						</p:commandButton>
					</h:column>
				</h:dataTable>
				<h:outputText value="No hay archivos adjuntos para esta sección" styleClass="bold" rendered="#{empty planCierreBean.files[planCierreBean.fileKey]}" />
				<p:separator />
				<div class="buttons">
					<p:commandButton type="button" value="Cerrar" onclick="PF('viewFiles').hide()" />
				</div>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>
</html>
