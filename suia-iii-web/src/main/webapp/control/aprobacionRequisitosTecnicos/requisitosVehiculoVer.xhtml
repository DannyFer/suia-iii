<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core" xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:mae="http://java.sun.com/jsf/composite/mae-composite" xmlns:mae-components="http://ec.gob.ambiente/mae-components" xmlns:control="http://java.sun.com/jsf/composite/controles-prime" template="/control/aprobacionRequisitosTecnicos/templates/verArt.xhtml">
	<ui:define name="content-art">
		<h:form id="form">
			<p:panelGrid columns="1" layout="grid" styleClass="w100">
				<f:facet name="header">
					<h:outputText value="#{labels['label.requisitos.vehiculo']}" />
				</f:facet>
				<p:dataTable value="#{requisitosVehiculoController.requisitosVehiculoBean.listaRequisitosVehiculo}" var="reqVehiculo" id="tablarequisitosVehiculo" emptyMessage="#{labels['common.table.empty']}"
				sortOrder="descending" rows="10" paginator="true" paginatorPosition="bottom" currentPageReportTemplate="{currentPage} de {totalPages}" rowsPerPageTemplate="5,10,15">
					<f:facet name="header">
						<h:outputText value="Total de vehículos: #{requisitosVehiculoController.requisitosVehiculoBean.listaRequisitosVehiculo.size()}" />
					</f:facet>
					<p:column headerText="#{labels['label.numero.placa']}">
						<h:outputText value="#{reqVehiculo.numeroPlaca}" />
					</p:column>
					<p:column headerText="#{labels['label.numero.motor']}">
						<h:outputText value="#{reqVehiculo.numeroMotor}" />
					</p:column>
					<p:column headerText="#{labels['label.numero.chasis']}">
						<h:outputText value="#{reqVehiculo.numeroChasis}" />
					</p:column>
					<p:column headerText="#{labels['label.clase.vehiculo']}">
						<h:outputText value="#{reqVehiculo.clase}" />
					</p:column>
					<p:column headerText="#{labels['label.tipo.vehiculo']}">
						<h:outputText value="#{reqVehiculo.tipo}" />
					</p:column>
					<p:column headerText="#{labels['label.anio.fabricacion']}">
						<h:outputText value="#{reqVehiculo.anioFabriacacion}" />
					</p:column>
					<p:column headerText="#{labels['label.cilindraje']}">
						<h:outputText value="#{reqVehiculo.cilindraje}" />
					</p:column>
					<p:column headerText="#{labels['label.capacidad.transporte']}">
						<h:outputText value="#{reqVehiculo.capacidadTransporte}" />
					</p:column>
					<p:column headerText="#{labels['label.peso.bruto.vehicular']}">
						<h:outputText value="#{reqVehiculo.pesoBrutoVehicular}" />
					</p:column>
					<p:column styleClass="w40px alCenter">
						<p:commandButton icon="ui-icon-search" action="#{requisitosVehiculoController.seleccionarRequisito(reqVehiculo)}" title="Ver" styleClass="button-small primary" oncomplete="PF('agregarRequerimiento').show();" update=":#{p:component('datosGenerales')}" process="@this" />
					</p:column>
				</p:dataTable>
			</p:panelGrid>
			<div class="buttons main">
				<p:commandButton value="Atrás" immediate="true" process="@this" action="/control/aprobacionRequisitosTecnicos/informacionPatioManiobraVer.jsf?faces-redirect=true" icon="ui-icon-arrowthick-1-w" />
				<p:commandButton value="Siguiente" immediate="true" process="@this" action="/control/aprobacionRequisitosTecnicos/requisitosConductorVer.jsf?faces-redirect=true" icon="ui-icon-arrowthick-1-e" />
			</div>
			<p:dialog id="agregarRequerimiento" widgetVar="agregarRequerimiento" modal="true" resizable="false" width="700" header="#{labels['label.requisitos.vehiculo']}">
				<h:panelGrid id="datosGenerales">
					<p:panelGrid columns="2" layout="grid" styleClass="w100" columnClasses="w50, field_mrg w50">
						<f:facet name="header">
							<h:outputText value="Datos" />
						</f:facet>

						<h:panelGrid styleClass="panel_data w100" columns="2" columnClasses="header, null" rowClasses="null, alt">
							<h:outputText for="numPlaca" value="#{labels['label.numero.placa']}" />
							<h:outputText id="numPlaca" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.numeroPlaca}" />

							<h:outputText value="#{labels['label.numero.motor']}" />
							<h:outputText id="numMotor" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.numeroMotor}" />
							<h:outputText value="#{labels['label.numero.chasis']}" />
							<h:outputText id="numChasis" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.numeroChasis}" />
							<h:outputText value="#{labels['label.clase.vehiculo']}" />
							<h:outputText id="clase" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.clase}" />
							<h:outputText value="#{labels['label.tipo.vehiculo']}" />
							<h:outputText id="tipo" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.tipo}" />
						</h:panelGrid>
						<h:panelGrid styleClass="panel_data w100" columns="2" columnClasses="header, null" rowClasses="null, alt">
							<h:outputText value="#{labels['label.anio.fabricacion']}" />
							<h:outputText id="anioFabricacion" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.anioFabriacacion}" />
							<h:outputText value="#{labels['label.cilindraje']}" />
							<h:outputText id="cilindraje" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.cilindraje}" />
							<h:outputText value="#{labels['label.capacidad.transporte']}" />
							<h:outputText id="capacidadTransporte" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.capacidadTransporte}" />
							<h:outputText value="#{labels['label.peso.bruto.vehicular']}" />
							<h:outputText id="pesoBruto" value="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.pesoBrutoVehicular}" />
						</h:panelGrid>
					</p:panelGrid>

					<p:panelGrid columns="1" layout="grid" styleClass="w100" columnClasses="w100">
						<f:facet name="header">
							<h:outputText value="Documentos" />
						</f:facet>

						<h:panelGrid styleClass="panel_data" columns="2" columnClasses="header, w20px alCenter" rowClasses="null, alt">

							<h:outputText value="#{labels['label.foto']}:" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoFoto.nombre!=null}" />
							<p:commandButton icon="ui-icon-search" styleClass="button-small primary" title="Ver" action="#{requisitosVehiculoController.descargar(0)}" ajax="false" id="btn_descargaFoto" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoFoto.nombre!=null}" />
							<h:outputText value="#{labels['label.certificado.inspeccion.vehicular']}:" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoCertificadoInspeccionTecnicaVehicular.nombre!=null}" />
							<p:commandButton icon="ui-icon-search" styleClass="button-small primary" title="Ver" action="#{requisitosVehiculoController.descargar(2)}" ajax="false" id="btn_descargaCertificadoInspeccion" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoCertificadoInspeccionTecnicaVehicular.nombre!=null}" />
							<h:outputText value="#{labels['label.matricula']}:" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoMatricula.nombre!=null}" />
							<p:commandButton icon="ui-icon-search" styleClass="button-small primary" title="Ver" action="#{requisitosVehiculoController.descargar(1)}" ajax="false" id="btn_descargaMatricula" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoMatricula.nombre!=null}" />
							<h:outputText value="#{labels['label.certificado.calibracion.tanque.cisterna']}:" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.habilitarCertificadoCalibracion and requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoCertificadoCalibracionTanque.nombre!=null}" />
							<p:commandButton icon="ui-icon-search" rendered="#{requisitosVehiculoController.requisitosVehiculoBean.habilitarCertificadoCalibracion and requisitosVehiculoController.requisitosVehiculoBean.requisitoVehiculo.documentoCertificadoCalibracionTanque.nombre!=null}" styleClass="button-small primary" title="Ver" action="#{requisitosVehiculoController.descargar(3)}" ajax="false" id="btn_descargaCertificadoCalibracion" />
						</h:panelGrid>
					</p:panelGrid>
				</h:panelGrid>
				<p:separator />
				<div class="buttons">
					<p:commandButton type="button" value="Cerrar" onclick="PF('agregarRequerimiento').hide()" />
				</div>
			</p:dialog>

		</h:form>


		<script type="text/javascript">
	
        function handleMaxVehiculosRequest(xhr, status, args) {
                if (args.maxNumVehiculos) {
                	
                	 PF('agregarMaxVehiculoWdgt').show();
                }  
                else{
                	 PF('agregarRequerimiento').show();
                    }              
            }
	
		</script>

	</ui:define>
</ui:composition>
