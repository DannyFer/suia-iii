<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<body>
	<h:panelGrid columns="4" columnClasses="field_mrg, field_mrg, field_mrg, field_mrg" id="grid1Id">
		<p:outputLabel for="puntoDescarga" value="Punto de Descarga" style="padding-right: 20px;" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.nombre}" id="puntoDescarga" />
		<h:outputText style="padding-right: 20px;" />
		<p:panelGrid columns="3">
			<h:outputLabel />
			<p:outputLabel for="coordenadaUtmX" value="X" />
			<p:outputLabel for="coordenadaUtmY" value="Y" />

			<p:outputLabel value="Coordenadas UTM" />
			<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaUtmX}" id="coordenadaUtmX" style="width:80px" />
			<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaUtmY}" id="coordenadaUtmY" style="width:80px" />

			<p:outputLabel value="Coordenadas Geográficas" />
			<h:outputText />
			<h:outputText />

			<p:outputLabel value="Latitud" />
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLatGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLatMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLatSegundos}" style="width:40px" />
			</h:panelGroup>
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLatGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLatMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLatSegundos}" style="width:40px" />
			</h:panelGroup>

			<p:outputLabel value="Longitud" />
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLngGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLngMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogXLngSegundos}" style="width:40px" />
			</h:panelGroup>
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLngGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLngMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.coordenadaGeogYLngSegundos}" style="width:40px" />
			</h:panelGroup>
		</p:panelGrid>
	</h:panelGrid>

	<h:panelGrid columns="4" columnClasses="field_mrg, field_mrg, field_mrg_x4, field_mrg" id="grid2Id">
		<p:outputLabel for="codigoPuntoMonitoreo" value="Cod. Punto Monitoreo" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.codigoPuntoMonitoreo}" id="codigoPuntoMonitoreo" />
		<p:outputLabel for="tipoDescarga" value="Tipo de Descarga" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.tipoDescarga}" id="tipoDescarga" />

		<p:outputLabel for="puntoInmision" value="Punto de Inmisión" />
		<p:selectOneMenu value="#{puntosMonitoreoBean.puntoDescargaLiquida.puntoInmision}" id="puntoInmision" styleClass="w100">
			<f:selectItems value="#{puntosMonitoreoBean.puntosInmision}" />
			<f:converter converterId="selectItemConverter" />
		</p:selectOneMenu>
		<p:outputLabel for="bloque" value="Bloque" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.bloque}" id="bloque" />

		<p:outputLabel for="facilidad" value="Facilidad" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.facilidad}" id="facilidad" />
		<p:outputLabel for="tratamientoPrevioDescarga" value="Tratamiento Previo a la Descarga" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.tratamientoPrevioDescarga}" id="tratamientoPrevioDescarga" />

		<p:outputLabel for="otrasCaracteristicas" value="Otras Caracteristicas" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.otrasCaracteristicas}" id="otrasCaracteristicas" />
		<p:outputLabel for="caudalPromedio" value="Caudal Promedio" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.caudalPromedio}" id="caudalPromedio" />

		<p:outputLabel for="sistemaReferencia" value="Sistema de Referencia" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.sistemaReferencia}" id="sistemaReferencia" />
		<p:outputLabel for="husoHorario" value="Huso Horario" />
		<p:selectOneMenu value="#{puntosMonitoreoBean.puntoDescargaLiquida.husoHorario}" id="husoHorario" styleClass="w100">
			<f:selectItems value="#{puntosMonitoreoBean.husosHorarios}" />
			<f:converter converterId="selectItemConverter" />
		</p:selectOneMenu>

		<h:outputText value="¿Aprobado?" />
		<p:selectBooleanCheckbox id="girar" value="#{puntosMonitoreoBean.puntoDescargaLiquida.aprobado}">
			<f:ajax execute="@form #{p.component('tabPuntosDL')}" render="@form #{p.component('numeroOficioLabel')} @form #{p.component('numeroOficio')} @form #{p.component('fechaInicioMonitoreoLabel')} @form #{p.component('fechaInicioMonitoreo')}" />
		</p:selectBooleanCheckbox>

		<p:outputLabel for="numeroOficio" value="Número de Oficio" rendered="#{puntosMonitoreoBean.puntoDescargaLiquida.aprobado == true ? 'true' : 'false'}" id="numeroOficioLabel" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.numeroOficio}" id="numeroOficio" rendered="#{puntosMonitoreoBean.puntoDescargaLiquida.aprobado == true ? 'true' : 'false'}" />

		<p:outputLabel for="fechaInicioMonitoreo" value="Fecha de Inicio del Monitoreo" rendered="#{puntosMonitoreoBean.puntoDescargaLiquida.aprobado == false ? 'true' : 'false'}" id="fechaInicioMonitoreoLabel" />
		<p:inputText value="#{puntosMonitoreoBean.puntoDescargaLiquida.fechaInicioMonitoreo}" id="fechaInicioMonitoreo" rendered="#{puntosMonitoreoBean.puntoDescargaLiquida.aprobado == false ? 'true' : 'false'}" />
	</h:panelGrid>
	<br />
	<br />
	<p:commandButton actionListener="#{aprobacionPuntosController.limpiarTabPuntoDescargaLiquida()}" value="Limpiar" ajax="true" process="@this" update="@form #{p.component('tabPuntosDL')}" icon="ui-icon-close" style="float:right;" />
	<p:commandButton actionListener="#{aprobacionPuntosController.adicionarPuntoDescargaLiquida()}" value="#{puntosMonitoreoBean.puntoDescargaLiquida.persisted ? 'Editar' : 'Adicionar'}" ajax="true" process="tabPuntosDL" update="@form #{p.component('tabPuntosDL')}" icon="ui-icon-circle-plus" style="float:right;" />
	<br />
	<br />
	<p:dataTable var="puntoDL" value="#{puntosMonitoreoBean.puntosDescargaLiquida}" widgetVar="puntosDLTable" emptyMessage="No hay resultados " filteredValue="#{puntosMonitoreoBean.puntosDescargaLiquidaFiltrados}" paginator="true" rows="5" id="puntosDLTableId">
		<f:facet name="header">
			<p:outputPanel>
				<h:outputText value="Criterio de busqueda:  " />
				<p:inputText id="globalFilter" onkeyup="PF('puntosDLTable').filter()" style="width:150px" placeholder="..teclee.." />
				<h:commandLink title="Exportar a Excel" style="float:right;">
					<p:graphicImage name="/images/excel.png" width="24" />
					<p:dataExporter type="xls" target="puntosDLTableId" fileName="PuntosMonitoreo" />
				</h:commandLink>
			</p:outputPanel>
		</f:facet>
		<p:column headerText="Punto de Descarga" filterBy="#{puntoDL.nombre}" filterMatchMode="contains" sortBy="#{puntoDL.nombre}">
			<h:outputText value="#{puntoDL.nombre}" />
		</p:column>
		<p:column headerText="Coordenada X" filterBy="#{puntoDL.coordenadaUtmX}" filterMatchMode="contains" sortBy="#{puntoDL.coordenadaUtmX}">
			<h:outputText value="#{puntoDL.coordenadaUtmX}" />
		</p:column>
		<p:column headerText="Coordenada Y" filterBy="#{puntoDL.coordenadaUtmY}" filterMatchMode="contains" sortBy="#{puntoDL.coordenadaUtmY}">
			<h:outputText value="#{puntoDL.coordenadaUtmY}" />
		</p:column>
		<p:column headerText="Punto de Inmisión" filterBy="#{puntoDL.puntoInmision.nombre}" filterMatchMode="contains" sortBy="#{puntoDL.puntoInmision.nombre}">
			<h:outputText value="#{puntoDL.puntoInmision.nombre}" />
		</p:column>
		<p:column headerText="Coordenada X" filterBy="#{puntoDL.puntoInmision.coordenadaUtmX}" filterMatchMode="contains" sortBy="#{puntoDL.puntoInmision.coordenadaUtmX}">
			<h:outputText value="#{puntoDL.puntoInmision.coordenadaUtmX}" />
		</p:column>
		<p:column headerText="Coordenada Y" filterBy="#{puntoDL.puntoInmision.coordenadaUtmY}" filterMatchMode="contains" sortBy="#{puntoDL.puntoInmision.coordenadaUtmX}">
			<h:outputText value="#{puntoDL.puntoInmision.coordenadaUtmY}" />
		</p:column>
		<p:column headerText="Acciones" exportable="false">
			<p:commandButton actionListener="#{aprobacionPuntosController.editarPuntoDescargaLiquida(puntoDL)}" process="@this" update="@form #{p.component('tabPuntosDL')}" icon="ui-icon-pencil" title="Editar" ajax="true" disabled="#{puntoDL.estadoPuntoMonitoreo == 'PENDIENTE_APROBACION' ? 'true' : 'false'}" />
			<h:outputText value=" " />
			<p:commandButton actionListener="#{aprobacionPuntosController.eliminarPuntoDescargaLiquida(puntoDL)}" process="@this" update="@form #{p.component('tabPuntosDL')}" icon="ui-icon-trash" title="Eliminar" ajax="true" disabled="#{puntoDL.estadoPuntoMonitoreo == 'PENDIENTE_APROBACION' ? 'true' : 'false'}" />
		</p:column>
	</p:dataTable>
</body>
</html>
