<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<body>
	<h:panelGrid columns="4" columnClasses="field_mrg, field_mrg, field_mrg, field_mrg">
		<p:outputLabel for="puntoEmision" value="Nombre" style="padding-right: 134px;" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.nombre}" id="puntoEmision" />
		<h:outputText style="padding-right: 21px;" />
		<p:panelGrid columns="3">
			<h:outputLabel />
			<p:outputLabel for="peCoordenadaUtmX" value="X" />
			<p:outputLabel for="peCoordenadaUtmY" value="Y" />

			<p:outputLabel value="Coordenadas UTM" />
			<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaUtmX}" id="peCoordenadaUtmX" style="width:80px" />
			<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaUtmY}" id="peCoordenadaUtmY" style="width:80px" />

			<p:outputLabel value="Coordenadas Geográficas" />
			<h:outputText />
			<h:outputText />

			<p:outputLabel value="Latitud" />
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLatGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLatMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLatSegundos}" style="width:40px" />
			</h:panelGroup>
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLatGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLatMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLatSegundos}" style="width:40px" />
			</h:panelGroup>

			<p:outputLabel value="Longitud" />
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLngGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLngMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogXLngSegundos}" style="width:40px" />
			</h:panelGroup>
			<h:panelGroup>
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLngGrados}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLngMinutos}" style="width:40px" />
				<p:inputText value="#{puntosMonitoreoBean.puntoEmision.coordenadaGeogYLngSegundos}" style="width:40px" />
			</h:panelGroup>
		</p:panelGrid>
	</h:panelGrid>

	<h:panelGrid columns="4" columnClasses="field_mrg, field_mrg, field_mrg_x4, field_mrg">
		<p:outputLabel for="tipoCombustible" value="Tipo de Combustible" />
		<p:selectOneMenu value="#{puntosMonitoreoBean.puntoEmision.tipoCombustible}" id="tipoCombustible" styleClass="w100">
			<f:selectItems value="#{puntosMonitoreoBean.tiposCombustibles}" />
			<f:converter converterId="selectItemConverter" />
		</p:selectOneMenu>

		<p:outputLabel for="consumoCombustible" value="Consumo de Combustible" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.consumoCombustible}" id="consumoCombustible" />

		<p:outputLabel for="tipoFuente" value="Tipo de Fuente" />
		<p:selectOneMenu value="#{puntosMonitoreoBean.puntoEmision.tipoFuente}" id="tipoFuente" styleClass="w100">
			<f:selectItems value="#{puntosMonitoreoBean.tiposFuentes}" />
			<f:converter converterId="selectItemConverter" />
		</p:selectOneMenu>

		<p:outputLabel for="tiempoFuncionamientoFuente" value="Tiempo de Funcionamiento de la Fuente" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.tiempoFuncionamientoFuente}" id="tiempoFuncionamientoFuente" />

		<p:outputLabel for="capacidadFuente" value="Capacidad de la Fuente" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.capacidadFuente}" id="capacidadFuente" />

		<p:outputLabel for="alturaFuenteEmision" value="Altura de la Fuente de Emisión" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.alturaFuenteEmision}" id="alturaFuenteEmision" />

		<p:outputLabel for="materialesAIncinerar" value="Materiales a Incinerar" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.materialesAIncinerar}" id="materialesAIncinerar" />

		<p:outputLabel for="volumenPromedioEmision" value="Volumen Promedio de la Emisión" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.volumenPromedioEmision}" id="volumenPromedioEmision" />

		<p:outputLabel for="dimensionMechero" value="Dimension del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.dimensionMechero}" id="dimensionMechero" />

		<p:outputLabel for="alturaMechero" value="Altura del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.alturaMechero}" id="alturaMechero" />

		<p:outputLabel for="anchoMechero" value="Ancho del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.anchoMechero}" id="anchoMechero" />

		<p:outputLabel for="tipoMechero" value="Tipo del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.tipoMechero}" id="tipoMechero" />

		<p:outputLabel for="detallesTecnicosMechero" value="Detalles Técnicos del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.detallesTecnicosMechero}" id="detallesTecnicosMechero" />

		<p:outputLabel for="periodicidadFuncionamientoMechero" value="Periodicidad de Funcionamiento del Mechero" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.periodicidadFuncionamientoMechero}" id="periodicidadFuncionamientoMechero" />

		<p:outputLabel for="velocidadPromedioViento" value="Velocidad Promedio del Viento" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.velocidadPromedioViento}" id="velocidadPromedioViento" />

		<p:outputLabel for="direccionPrincipalViento" value="Direccion Principal del Viento" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.direccionPrincipalViento}" id="direccionPrincipalViento" />

		<h:outputText value="¿Aprobado?" />
		<p:selectBooleanCheckbox id="aprobadoPe" value="#{puntosMonitoreoBean.puntoEmision.aprobado}">
			<f:ajax execute="@form #{p.component('tabPuntosEA')}" render="@form #{p.component('tabPuntosEA')}" />
		</p:selectBooleanCheckbox>

		<p:outputLabel for="numeroOficioPe" value="Número de Oficio" rendered="#{puntosMonitoreoBean.puntoEmision.aprobado == true ? 'true' : 'false'}" id="numeroOficioPeLabel" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.numeroOficio}" id="numeroOficioPe" rendered="#{puntosMonitoreoBean.puntoEmision.aprobado == true ? 'true' : 'false'}" />

		<p:outputLabel for="fechaInicioMonitoreoPe" value="Fecha de Inicio del Monitoreo" rendered="#{puntosMonitoreoBean.puntoEmision.aprobado == false ? 'true' : 'false'}" id="fechaInicioMonitoreoPeLabel" />
		<p:inputText value="#{puntosMonitoreoBean.puntoEmision.fechaInicioMonitoreo}" id="fechaInicioMonitoreoPe" rendered="#{puntosMonitoreoBean.puntoEmision.aprobado == false ? 'true' : 'false'}" />
	</h:panelGrid>
	<br />
	<br />
	<p:commandButton actionListener="#{aprobacionPuntosController.limpiarTabPuntoEmisionAtmosfera()}" value="Limpiar" ajax="true" process="@this" update="@form #{p.component('tabPuntosEA')}" icon="ui-icon-close" style="float:right;" />
	<p:commandButton actionListener="#{aprobacionPuntosController.adicionarPuntoEmisionAtmosfera()}" value="#{puntosMonitoreoBean.puntoEmision.persisted ? 'Editar' : 'Adicionar'}" ajax="true" process="tabPuntosEA" update="@form #{p.component('tabPuntosEA')}" icon="ui-icon-circle-plus" style="float:right;" />
	<br />
	<br />
	<p:dataTable var="puntoEA" value="#{puntosMonitoreoBean.puntosEmision}" widgetVar="puntosEATable" emptyMessage="No hay resultados " filteredValue="#{puntosMonitoreoBean.puntosEmisionFiltrados}" paginator="true" rows="5" id="puntosEATableId">
		<f:facet name="header">
			<p:outputPanel>
				<h:outputText value="Criterio de busqueda:  " />
				<p:inputText id="globalFilter" onkeyup="PF('puntosEATable').filter()" style="width:150px" placeholder="..teclee.." />
				<h:commandLink title="Exportar a Excel" style="float:right;">
					<p:graphicImage name="/images/excel.png" width="24" />
					<p:dataExporter type="xls" target="puntosEATableId" fileName="PuntosMonitoreo" />
				</h:commandLink>
			</p:outputPanel>
		</f:facet>
		<p:column headerText="Punto de Emisión" filterBy="#{puntoEA.nombre}" filterMatchMode="contains" sortBy="#{puntoEA.nombre}">
			<h:outputText value="#{puntoEA.nombre}" />
		</p:column>
		<p:column headerText="Coordenada X" filterBy="#{puntoEA.coordenadaUtmX}" filterMatchMode="contains" sortBy="#{puntoEA.coordenadaUtmX}">
			<h:outputText value="#{puntoEA.coordenadaUtmX}" />
		</p:column>
		<p:column headerText="Coordenada Y" filterBy="#{puntoEA.coordenadaUtmY}" filterMatchMode="contains" sortBy="#{puntoEA.coordenadaUtmY}">
			<h:outputText value="#{puntoEA.coordenadaUtmY}" />
		</p:column>
		<p:column headerText="Tipo de Fuente" filterBy="#{puntoEA.tipoFuente}" filterMatchMode="contains" sortBy="#{puntoEA.tipoFuente}">
			<h:outputText value="#{puntoEA.tipoFuente}" />
		</p:column>
		<p:column headerText="Tipo de Combustible" filterBy="#{puntoEA.tipoCombustible}" filterMatchMode="contains" sortBy="#{puntoEA.tipoCombustible}">
			<h:outputText value="#{puntoEA.tipoCombustible}" />
		</p:column>
		<p:column headerText="Coordenada Y" filterBy="#{puntoEA.capacidadFuente}" filterMatchMode="contains" sortBy="#{puntoEA.capacidadFuente}">
			<h:outputText value="#{puntoEA.capacidadFuente}" />
		</p:column>
		<p:column headerText="Acciones" exportable="false">
			<p:commandButton actionListener="#{aprobacionPuntosController.editarPuntoEmisionAtmosfera(puntoEA)}" process="@this" update="@form #{p.component('tabPuntosEA')}" icon="ui-icon-pencil" title="Editar" ajax="true" disabled="#{puntoEA.estadoPuntoMonitoreo == 'PENDIENTE_APROBACION' ? 'true' : 'false'}" />
			<h:outputText value=" " />
			<p:commandButton actionListener="#{aprobacionPuntosController.eliminarPuntoEmisionAtmosfera(puntoEA)}" process="@this" update="@form #{p.component('tabPuntosEA')}" icon="ui-icon-trash" title="Eliminar" ajax="true" disabled="#{puntoEA.estadoPuntoMonitoreo == 'PENDIENTE_APROBACION' ? 'true' : 'false'}" />
		</p:column>
	</p:dataTable>
</body>
</html>
