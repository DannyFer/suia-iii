<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:mae="http://java.sun.com/jsf/composite/mae-composite"
	xmlns:mae-components="http://ec.gob.ambiente/mae-components"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:t="http://myfaces.apache.org/tomahawk">

<h:panelGroup id="caracteristicasMedicion">

		<p:panelGrid columns="1" layout="grid" styleClass="w100"
			columnClasses="w25, field_mrg w25">
			<f:facet name="header">
				<h:outputText value="CARACTERÍSTICAS DE MEDICIÓN" />
			</f:facet>
		</p:panelGrid>

		<p:panelGrid columns="1" layout="grid" styleClass="w100">
			<f:facet name="header">
				<h:outputText value="Características de la fuente:" />
			</f:facet>
			<p:panelGrid columns="2" styleClass="panel_data w100"
				columnClasses="header w25,null w75">
				<h:outputText value="Código del punto de monitoreo aprobado:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.codigoPuntoMonitoreo}" />
				<h:outputText value="Ubicación fuente fija (coordenadas X):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.coordenadaX}" />
				<h:outputText value="Ubicación fuente fija (coordenadas Y):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.coordenadaY}" />
			</p:panelGrid>
			<p:panelGrid columns="6" styleClass="panel_data w100" id="pnlUbicacion"
				columnClasses="header w15,null w20, header w15, w20, header w10, w20">
				<h:outputText value="Provincia:"/>
				<p:inputText value="#{emisionesAtmosfericasVerController.detalleEmision.ubicacionGeografica.ubicacionesGeografica.ubicacionesGeografica.nombre}" 
					readonly="true" />
				<h:outputText value="Cantón:"/>
				<p:inputText value="#{emisionesAtmosfericasVerController.detalleEmision.ubicacionGeografica.ubicacionesGeografica.nombre}" 
					readonly="true" />
				<h:outputText value="Parroquia:"/>
				<p:inputText value="#{emisionesAtmosfericasVerController.detalleEmision.ubicacionGeografica.nombre}" 
					readonly="true" />
			</p:panelGrid>			
			
			<p:panelGrid columns="2" styleClass="panel_data w100"
				columnClasses="header w25,null w75">
				<h:outputText value="Oficio de aprobación del punto de monitoreo: *" />
				<h:panelGroup>					
				<h:outputText id="nombreDoc1" value="#{emisionesAtmosfericasVerController.oficioAprobacionDoc.nombre}" />
				<p:commandButton id="fileDownloadAprobacion"
							icon="ui-icon-arrowthickstop-1-s" styleClass="primary"
							ajax="false" process="@this" title="Descargar">
							<p:fileDownload
								value="#{emisionesAtmosfericasVerController.getDocumentoOficioAprobacion()}" />
						</p:commandButton>
				</h:panelGroup>

				<h:outputText value="Fuente Fija de combustión: *" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.fuenteFijaCombustion.fuente}"/>
				<h:outputText value="Locación asociada: *" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.locacionAsociada}"/>
					
			</p:panelGrid>
			<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialCaracteristicasFuente}">
							<h:outputText id="caracteristicasHis" value="Características de la fuente historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('caracteristicasDiag').show()"/>
			</h:panelGrid>
			
		</p:panelGrid>

		<p:panelGrid columns="1" layout="grid" styleClass="w100">
			<f:facet name="header">
				<h:outputText value="Funcionamiento de la Fuente:" />
			</f:facet>
			<p:panelGrid columns="4" styleClass="panel_data w100"
				columnClasses="header w25,null w25, header w25,null w25">

				<h:outputText value="Potencia:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.potencia}" />				

				<h:outputText value="Unidad:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.catalogoUnidadesPotencia.descripcion}" />				

				<h:outputText value="Marca:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.marca}" />				
				<h:outputText value="Número de Serie:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.numeroSerie}" />
				
				<h:outputText value="Tipo de Combustible:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.tipoCombustible.descripcion}" />			
				<h:outputText id="HorasFuncionamientoId" value="Horas de funcionamiento:" rendered="#{emisionesAtmosfericasVerController.mostrarHoras}"/>
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.horasFuncionamiento}" />
				</p:panelGrid>
				
				<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialFuncionamientoFuente}">
							<h:outputText id="funcionamientoHis" value="Funcionamiento de la Fuente historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('funcionamientoDiag').show()"/>
			</h:panelGrid>
			<p:panelGrid columns="4" styleClass="panel_data w100"
				columnClasses="header w25, null w25, header w25, null w25">
				<h:outputText value="Consumo de combustible (mes):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.consumoCombustible}" />
				<h:outputText value="Unidad:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.catalogoUnidadesCombustible.descripcion}" />
			</p:panelGrid>
				
			<p:panelGrid columns="2" styleClass="panel_data w100" columnClasses="header w25,null w75">
				<h:outputText value="Número de ductos o chimeneas:" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.numeroDuctosChimenea}" />
				<h:outputText value="Facilidades de monitoreo:" />				
				<p:selectManyCheckbox
					value="#{emisionesAtmosfericasVerController.facilidadesMonitoreoSeleccionadas}"
					required="true" id="facilidadesMonitoreo" layout="grid" columns="3"
					styleClass="field_mrg w100" disabled="true">
					<f:selectItems var="item"
						value="#{emisionesAtmosfericasVerController.listaFacilidadesMonitoreo}"
						itemLabel="#{item.descripcion}" itemValue="#{item.id}" />
				</p:selectManyCheckbox>
			</p:panelGrid>
			
			<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaFacilidadesHistorial}">
							<h:outputText id="facilidadesHis" value="Facilidades de monitoreo historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('facilidadesDiag').show()"/>
			</h:panelGrid>
			

			<h:outputLabel value="Características de la chimenea:" />
			<p:panelGrid columns="9" styleClass="panel_data w100"
				columnClasses="header w12,null w12, header w12, null w12, w12, header w12,null w12, header w12,null w12">

				<h:outputText value="Altura o longitud (m):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.alturaLongitudChimenea}" />
				
				<h:outputText value="Diámetro (m):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.diametroChimenea}"/>
				
				<h:outputLabel value="Distancia puerto de muestreo:" />
				<h:outputText value="Última perturbación (m):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.ultimaPerturbacion}" />
				
				<h:outputText value="Cúspide chimenea (m):" />
				<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.cuspideChimenea}"/>				

			</p:panelGrid>
			
			<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialChimenea}">
							<h:outputText id="chimeneaHis" value="Características de la chimenea historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('chimeneaDiag').show()"/>
			</h:panelGrid>
		</p:panelGrid>
	</h:panelGroup>

	<p:dialog header="Caracteristicas de la fuente"
				id="caracteristicasDiag" widgetVar="caracteristicasDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="caracteristicasHPanel">		
			<p:dataTable id="caracteristicasHTable" value="#{emisionesAtmosfericasVerController.listaHistorialCaracteristicasFuente}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" currentPageReportTemplate="{currentPage} de {totalPages}" rows="5">	
				<p:column headerText="Fecha Modificaci&oacute;n">
					<h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Código del punto de monitoreo aprobado">
				<h:outputText value="#{item.codigoPuntoMonitoreo}"/>
				</p:column>				
				<p:column headerText="Oficio de aprobación del punto de monitoreo" style="text-align:center;">
				<h:outputText value="#{item.documentoOficioAprobacion.nombre}"/>
						<p:commandButton id="fileDownload"
							icon="ui-icon-arrowthickstop-1-s" styleClass="primary"
							ajax="false" process="@this" title="Descargar">
							<p:fileDownload
								value="#{emisionesAtmosfericasVerController.getDocumento(item.documentoOficioAprobacion)}" />
						</p:commandButton>
					</p:column>
				<p:column headerText="Fuente Fija de combustión">
				<h:outputText value="#{emisionesAtmosfericas.fuenteFijaCombustion.fuente}"/>
				</p:column>
			</p:dataTable>
						
			</p:panel>
                 <div class="buttons">                     
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('caracteristicasDiag').hide()"/>                    
                </div>                      
         </p:dialog>
         
         <p:dialog header="Funcionamiento de la Fuente"
				id="funcionamientoDiag" widgetVar="funcionamientoDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="funcionamientoHPanel">		
			<p:dataTable id="funcionamientoHTable" value="#{emisionesAtmosfericasVerController.listaHistorialFuncionamientoFuente}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" currentPageReportTemplate="{currentPage} de {totalPages}" rows="5">	
				<p:column headerText="Fecha Modificaci&oacute;n">
                     <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Potencia">
				<h:outputText value="#{item.potencia}"/>
				</p:column>	
				<p:column headerText="Unidad">
				<h:outputText value="#{item.catalogoUnidadesPotencia.descripcion}"/>
				</p:column>	
				<p:column headerText="Marca">
				<h:outputText value="#{item.marca}"/>
				</p:column>	
				<p:column headerText="Número de Serie">
				<h:outputText value="#{item.numeroSerie}"/>
				</p:column>			
				<p:column headerText="Tipo de Combustible">
				<h:outputText value="#{item.tipoCombustible.descripcion}"/>
				</p:column>
				<p:column headerText="Número de ductos o chimeneas">
				<h:outputText value="#{item.numeroDuctosChimenea}"/>
				</p:column>				
			</p:dataTable>
						
			</p:panel>
                 <div class="buttons">  
                    
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('funcionamientoDiag').hide()"/>
                    
                </div>	
                      
         </p:dialog>
         
         <p:dialog header="Facilidades de monitoreo"
				id="facilidadesDiag" widgetVar="facilidadesDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="facilidadesHPanel">		
			<p:dataTable id="facilidadesHTable" value="#{emisionesAtmosfericasVerController.listaFacilidadesHistorial}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" 
			currentPageReportTemplate="{currentPage} de {totalPages}" rows="5"
			style="text-align:center;">	
				<p:column headerText="Fecha Modificaci&oacute;n">
                     <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Facilidades de monitoreo">
				<h:outputText value="#{item.catalogoFacilidadesMonitoreo.descripcion}"/>
				</p:column>	
				<p:column style="text-align:center;">
				<h:outputText styleClass="text-orange" value="#{item.nuevoEnModificacion eq true ? 'Nuevo' : 'Eliminado'}"/>
				</p:column>							
			</p:dataTable>
						
			</p:panel>
                 <div class="buttons">  
                    
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('facilidadesDiag').hide()"/>
                    
                </div>	
                      
         </p:dialog>
         
          <p:dialog header="Características de la chimenea"
				id="chimeneaDiag" widgetVar="chimeneaDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="chimeneaHPanel">		
			<p:dataTable id="chimeneaHTable" value="#{emisionesAtmosfericasVerController.listaHistorialChimenea}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" currentPageReportTemplate="{currentPage} de {totalPages}" rows="5">
			
			<p:columnGroup type="header">
            <p:row>
               <p:column rowspan="2" headerText="Fecha Modificaci&oacute;n" />
               <p:column rowspan="2" headerText="Altura o longitud (m)" />
               <p:column rowspan="2" headerText="Diámetro (m)" />
                <p:column colspan="2" headerText="Distancia Puerto de muestreo" />
            </p:row>
            <p:row>
            	
                <p:column headerText="Última perturbación" />
                <p:column headerText="Cúspide chimenea (m)" />
            </p:row>
            
        </p:columnGroup>						
				<p:column>
                <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column>
				<h:outputText value="#{item.alturaLongitudChimenea}"/>
				</p:column>
				<p:column>
				<h:outputText value="#{item.diametroChimenea}"/>
				</p:column>	
				<p:column>
				<h:outputText value="#{item.ultimaPerturbacion}"/>
				</p:column>	
				<p:column>
				<h:outputText value="#{item.cuspideChimenea}"/>
				</p:column>						
			</p:dataTable>
						
			</p:panel>
                 <div class="buttons">  
                    
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('chimeneaDiag').hide()"/>
                    
                </div>	
                      
         </p:dialog>


</html>
