<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:mae="http://java.sun.com/jsf/composite/mae-composite"
	xmlns:mae-components="http://ec.gob.ambiente/mae-components"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:t="http://myfaces.apache.org/tomahawk">

<h:panelGroup id="registroMediciones">

<p:panelGrid columns="1" layout="grid" styleClass="w100">
				<f:facet name="header">
					<h:outputText value="REGISTRO DE MEDICIONES" />
				</f:facet>

				<p:panelGrid columns="1" styleClass="panel_data w100" layout="grid">
				<f:facet name="header">
						<h:outputText value="Ubicación fuente fija :" />
						</f:facet>
						
					<p:panelGrid columns="4" styleClass="panel_data w100"
						columnClasses="header w25, w25, header w25, w25">
						<h:outputText value="Nombre del lugar del punto de muestreo:" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.lugarPuntoMuestreo}" />
						
					</p:panelGrid>

				</p:panelGrid>
				<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialUbicacion}">
							<h:outputText id="ubicacionHis" value="Ubicación fuente fija historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('ubicacionDiag').show()"/>
				</h:panelGrid>
				
				
				
				<p:panelGrid columns="4" styleClass="panel_data w100" columnClasses="header w25,w25,header w25,w25" id="periodo">
						
						<h:outputText value="Periodo de medición (Desde)" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.fechaInicioMonitoreo}" />
						
						<h:outputText value="Perido de medición (Hasta)" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.fechaFinMonitoreo}" />
						
					</p:panelGrid>
					
					<p:panelGrid columns="2" styleClass="panel_data w100" columnClasses="header w25, null w75">
						<h:outputText value="Fases:" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.faseRetce.descripcion}" />
						
					</p:panelGrid>
					<p:panelGrid columns="2" styleClass="panel_data w100" columnClasses="header w25, null w75">
						<h:outputText value="Frecuencia de monitoreo:" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.frecuenciaMonitoreo.descripcion}" />
						
					</p:panelGrid>
					
					
				<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialEmisionesAtmosfericas}">
							<h:outputText id="periodoHis" value="Periodo de Medición y Frecuencia de Monitoreo historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('periodoDiag').show()"/>
				</h:panelGrid>
					
									
					<p:panelGrid columns="2" styleClass="panel_data w100" columnClasses="header w25, null w75">
						<h:outputText value="Estado de la fuente:"/>
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.estadoFuenteDetalleCatalogo.descripcion}"/>
						
					</p:panelGrid>
					
					
					
	</p:panelGrid>
	
	<p:panelGrid id="pnlMediciones" columns="1" layout="grid" styleClass="w100">
	
				<p:panelGrid id="pnlPrimerIngresoRegistro" columns="1"
					styleClass="panel_data w100" rendered="#{emisionesAtmosfericasVerController.mostrarEstadoFuente}">

					<p:panelGrid styleClass="panel_data w100" columns="2" columnClasses="header w25, null w75">

						<h:outputText value="Horas de funcionamiento:" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.horasFuncionamiento}" />						

						<h:outputText value="Tipo de funcionamiento:" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.tipoOperacionDetalleCatalogo.descripcion}" />
						
						<h:outputText value="Velocidad de salida(m/s):" />
						<h:outputText value="#{emisionesAtmosfericasVerController.detalleEmision.velocidadSalida}" />
											
					</p:panelGrid>				

				</p:panelGrid>

				<p:panelGrid id="pnlJustificacion" columns="1" styleClass="panel_data w100"
					rendered ="#{!emisionesAtmosfericasVerController.mostrarEstadoFuente}">
					<p:panelGrid columns="2" styleClass="panel_data w100" columnClasses="header w25, null w75">
						<h:outputText value="Justifique" />
						<p:inputTextarea readonly="true"
							value="#{emisionesAtmosfericasVerController.detalleEmision.justificacion}"
							maxlength="500" rows="5" autoResize="false"/>

						<h:outputText value="Documento de justificación " />
						<h:panelGroup>							
							<h:outputText id="DocJustificacion" value="#{emisionesAtmosfericasVerController.documentoJustificacionEstadoFuente.nombre}" />
								<p:commandButton id="fileDownload"
							icon="ui-icon-arrowthickstop-1-s" styleClass="primary"
							ajax="false" process="@this" title="Descargar">
							<p:fileDownload
								value="#{emisionesAtmosfericasVerController.obtenerDocumentoJustificacionEstadoFuente()}" />
						</p:commandButton>
						</h:panelGroup>

					</p:panelGrid>
					
				</p:panelGrid>
								
				<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt" 
							rendered="#{not empty emisionesAtmosfericasVerController.listaHistorialEstadoFuente}">
							<h:outputText id="fuenteHis" value="Datos de la fuente historial" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('fuenteHDiag').show()"/>
				</h:panelGrid>
				
		</p:panelGrid>


</h:panelGroup>


 	<p:dialog header="Ubicación fuente fija"
				id="ubicacionDiag" widgetVar="ubicacionDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="ubicacionHPanel">		
			<p:dataTable id="ubicacionHTable" value="#{emisionesAtmosfericasVerController.listaHistorialUbicacion}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" 
			currentPageReportTemplate="{currentPage} de {totalPages}" rows="5"
			style="text-align:center;">	
				<p:column headerText="Fecha Modificaci&oacute;n">
                <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Coordenada X">
				<h:outputText value="#{item.coordenadaX}"/>
				</p:column>	
				<p:column headerText="Coordenada Y">
				<h:outputText value="#{item.coordenadaY}"/>
				</p:column>
				<p:column headerText="Nombre del lugar del punto de muestreo">
				<h:outputText value="#{item.lugarPuntoMuestreo}"/>
				</p:column>						
			</p:dataTable>
						
			</p:panel>
                 <div class="buttons">
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('ubicacionDiag').hide()"/>
                </div>                      
         </p:dialog>
         
          <p:dialog header="Datos de la fuente"
				id="fuenteHDiag" widgetVar="fuenteHDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="fuenteHPanel">		
	<!-- 		<p:dataTable id="fuenteHTable" value="#{emisionesAtmosfericasVerController.listaHistorialEstadoFuente}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" 
			currentPageReportTemplate="{currentPage} de {totalPages}" rows="5"
			style="text-align:center;">	
				<p:column headerText="Fecha Modificaci&oacute;n">
                <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Estado de la fuente">
				<h:outputText value="#{item.estadoFuenteDetalleCatalogo.descripcion}"/>
				</p:column>	
				<p:column headerText="Consumo de combustible (mes)">
				<h:outputText value="#{item.consumoCombustible}"/>
				</p:column>	
				<p:column headerText="Unidad">
				<h:outputText value="#{item.catalogoUnidadesCombustible.descripcion}"/>
				</p:column>
				<p:column headerText="Horas de funcionamiento">
				<h:outputText value="#{item.horasFuncionamiento}"/>
				</p:column>	
				<p:column headerText="Tipo de funcionamiento">
				<h:outputText value="#{item.tipoOperacionDetalleCatalogo.descripcion}"/>
				</p:column>
				<p:column headerText="Velocidad de salida(m/s)">
				<h:outputText value="#{item.velocidadSalida}"/>
				</p:column>
				<p:column headerText="Justificación">
				<h:outputText value="#{item.justificacion}"/>
				</p:column>					
			</p:dataTable> -->

			<h:panelGrid styleClass="panel_data" columns="2"
							columnClasses="header background-orange, null"
							rowClasses="null, alt"
							rendered="#{not empty emisionesAtmosfericasVerController.listaDocumentosJustificacionEstadoFuenteHistorial}">
							<h:outputText id="docJustificativoHis" value="Documento de justificación" />
							<p:commandButton styleClass="button-small orange"
								icon="ui-icon-search" process="@this"
								oncomplete="PF('docJustificacionDiag').show()"								
								/>
					</h:panelGrid>
						
			</p:panel>
                 <div class="buttons">  
                    
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('fuenteHDiag').hide()"/>
                    
                </div>	
                      
         </p:dialog>
         
         <p:dialog header="Periodo de Medición y Frecuencia de Monitoreo"
				id="periodoDiag" widgetVar="periodoDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="true">

		<p:panel id="periodoHPanel">		
			<p:dataTable id="periodoHTable" value="#{emisionesAtmosfericasVerController.listaHistorialEmisionesAtmosfericas}" var="item"
			paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" 
			currentPageReportTemplate="{currentPage} de {totalPages}" rows="5"
			style="text-align:center;">	
				<p:column headerText="Fecha Modificaci&oacute;n">
                <h:outputText value="#{item.fechaCreacion}" />
                </p:column>         
				<p:column headerText="Periodo de medición (Desde)">
				<h:outputText value="#{item.fechaInicioMonitoreo}"/>
				</p:column>	
				<p:column headerText="Perido de medición (Hasta)">
				<h:outputText value="#{item.fechaFinMonitoreo}"/>
				</p:column>
				<p:column headerText="Frecuencia de monitoreo">
				<h:outputText value="#{item.frecuenciaMonitoreo.descripcion}"/>
				</p:column>						
			</p:dataTable>
			</p:panel>
                 <div class="buttons">
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('periodoDiag').hide()"/>
                </div>                      
         </p:dialog>
         
         <p:dialog header="Documento de justificación"
				id="docJustificacionDiag" widgetVar="docJustificacionDiag" modal="true"
				width="900" resizable="false" draggable="true" closable="false">

				<p:dataTable value="#{emisionesAtmosfericasVerController.listaDocumentosJustificacionEstadoFuenteHistorial}"
					var="doc" emptyMessage="#{labels['common.table.empty']}">					
					<p:column headerText="Nombre documento" style="text-align:center;">
						<h:outputText value="#{doc.nombre}"/>
					</p:column>
					<p:column headerText="Descarga" style="text-align:center;">
						<p:commandButton id="fileDownload"
							icon="ui-icon-arrowthickstop-1-s" styleClass="primary"
							ajax="false" process="@this" title="Descargar">
							<p:fileDownload value="#{emisionesAtmosfericasVerController.getDocumentoRespaldoLaboratorio(doc)}" />
						</p:commandButton>												
					</p:column>
					
				</p:dataTable>
                 <div class="buttons">       
                    
                     <p:commandButton value="Cerrar" styleClass="primary" process="@this" onclick="PF('docJustificacionDiag').hide()"/>
                    
                </div>	
                      
         </p:dialog>



</html>
