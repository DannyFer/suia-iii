<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:mae="http://java.sun.com/jsf/composite/mae-composite"
	xmlns:mae-components="http://ec.gob.ambiente/mae-components"
	xmlns:control="http://java.sun.com/jsf/composite/controles-prime">
<p:outputPanel id="frmPMA020">
						<p:panel style="border: none;">
							<br />
							<p:outputLabel
								value="Todas los subplanes del plan manejo ambiental, así como las medidas propuestas, indicadores, medios de verificación y frecuencia deben ser cumplidos en su totalidad y de manera obligatoria por el titular minero."></p:outputLabel>
							<br />
							<br />
							<p:outputLabel
								value="* Las medidas propuestas, indicadores, medios de verificación y frecuencia no son modificables, en caso de requerir nuevas medidas puede incluir en el subplan correspondiente."></p:outputLabel>
							<c:forEach var="actividad1" begin="0"
								items="#{planManejoAmbiental020Controller.parameters}">
								<p:dataGrid columns="1" value="#{actividad1.key}"
									var="actividadttt">

									<div class="#{actividad.key}">
										<p:dataTable id="tbl" var="plan" value="#{actividad1.value}"
											style="border: none;"
											emptyMessage="#{labels['common.table.empty']}">
											<f:facet name="header">#{actividad1.key}
												<p:commandButton value="Adicionar"
													styleClass="button-small-text toRight field_mrg"
													icon="ui-icon-plusthick"
													update=":formDetallePlan:dlgActividad" immediate="true"
													action="#{planManejoAmbiental020Controller.adicionar(actividad1.key)}"
													oncomplete="PF('dlgActividad').show();">
												</p:commandButton>
											</f:facet>
											<p:columnGroup type="header">
												<p:row>
													<p:column headerText="MEDIDAS PROPUESTAS" />
													<p:column headerText="INDICADOR" />
													<p:column headerText="MEDIO DE VERIFICACIÓN" />
													<p:column headerText="FRECUENCIA" styleClass="alLeft" />
													<p:column headerText="PRESUPUESTO" styleClass="alCenter" />
													<p:column headerText="ACCION" styleClass="alCenter" />
												</p:row>
											</p:columnGroup>
											<p:column style="text-align: justify"
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<f:facet name="header">
													<h:outputText value="MEDIDAS PROPUESTAS" />
												</f:facet>
												<h:outputText
													style="text-align: justify !important; white-space: pre-line;	word-wrap: break-word;"
													escape="false"
													value="#{(plan.planManejoAmbiental020 eq null)?plan.medidasPropuestas:plan.planManejoAmbiental020.medidasPropuestas}" />
											</p:column>
											<p:column style="text-align: justify"
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<f:facet name="header">
													<h:outputText value="INDICADOR" />
												</f:facet>
												<h:outputText 
													value="#{(plan.planManejoAmbiental020 eq null)?plan.indicador:plan.planManejoAmbiental020.indicador}" />
											</p:column>
											<p:column style="text-align: justify"
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<f:facet name="header">
													<h:outputText value="MEDIO DE VERIFICACIÓN" />
												</f:facet>
												<h:outputText 
													value="#{(plan.planManejoAmbiental020 eq null)?plan.verificacionMedios:plan.planManejoAmbiental020.verificacionMedios}" />
											</p:column>
											<p:column style="text-align: justify"
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<f:facet name="header">
													<h:outputText value="FRECUENCIA" />
												</f:facet>
												<h:outputText 
													value="#{(plan.planManejoAmbiental020 eq null)?plan.frecuencia:plan.planManejoAmbiental020.frecuencia}" />
											</p:column>
											<p:column styleClass="alCenter" colspan="6"
												rendered="#{plan.descripcion ne 'Otros' and  !(plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<strong> <h:outputText
														value="#{(plan.planManejoAmbiental020 eq null)?plan.descripcion:plan.planManejoAmbiental020.descripcion}" />
												</strong>
											</p:column>

											<p:column styleClass="alCenter" colspan="6"
												rendered="#{plan.planManejoAmbiental020.id  eq 125}">
												<p style="text-align: justify">#{plan.planManejoAmbiental020.medidasPropuestas}</p>
											</p:column>
											<p:column styleClass="alCenter" colspan="6"
												rendered="#{plan.planManejoAmbiental020.id  eq 77}">
												<p style="text-align: justify">#{plan.planManejoAmbiental020.medidasPropuestas}</p>
												<p>Formato de aplicación de medidas de minimización de
													residuos- desechos peligrosos y/o especiales</p>
												<p:dataTable emptyMessage="">
													<p:column>
														<f:facet name="header">
															<h:outputText value="Nombre del Residuo-desecho" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText value="Código del residuo-desecho" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText
																value="Justificación de selección del residuo-desecho." />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText value="Acción Propuesta" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText value="Meta en % " />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText value="Costos de implementación /anual " />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText
																value="Generación Anual del residuo-desecho (t)" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText
																value="dentificación de Material Prima que interviene en el proceso" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText
																value="Cantidad anual de materia prima que interviene en el proceso (t)" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText
																value="Proyección de disminución de generación del residuo- desechos anual (t)" />
														</f:facet>
													</p:column>
													<p:column>
														<f:facet name="header">
															<h:outputText value="Observaciones" />
														</f:facet>
													</p:column>
												</p:dataTable>
											</p:column>
											<p:column 
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<f:facet name="header">
													<h:outputText value="PRESUPUESTO" />
												</f:facet>
												<p:inputText value="#{plan.calificacion}"
													style="width: 100%;"
													converterMessage="Se debe ingresar un número"
													validatorMessage="El campo Presupuesto' no se encuentra entre los valores permitidos, debe ser mayor que 0 y menor que 999999.99."
													requiredMessage="El campo 'Presupuesto' es requerido."
													onkeypress="return numbersonly(this, event, true);"
													maxlength="9" required="true">
													<pe:keyFilter mask="num" />
													<f:convertNumber pattern="#0.00" />
													<f:validateDoubleRange minimum="1.00" maximum="999999.99" />
												</p:inputText>
											</p:column>
											<p:column
												rendered="#{(plan.descripcion eq 'Otros' or plan.planManejoAmbiental020.descripcion eq '') and (plan.planManejoAmbiental020 eq null or plan.planManejoAmbiental020.editable)}">
												<p:commandButton title="Editar" icon="ui-icon-pencil"
													styleClass="primary button-small"
													rendered="#{plan.planManejoAmbiental020 eq null}"
													action="#{planManejoAmbiental020Controller.editar(plan)}"
													update=":formDetallePlan:dlgActividad" immediate="true"
													oncomplete="PF('dlgActividad').show();">



													<p:commandButton update=":frmFicha020:frmPMA020"
														styleClass="button-small primary" process="@this"
														icon="ui-icon-circle-close"
														rendered="#{plan.planManejoAmbiental020 eq null}"
														actionListener="#{planManejoAmbiental020Controller.eliminar(plan)}">
														<p:confirm header="Confirmación"
															message="¿Está seguro que desea eliminar este plan?"
															icon="ui-icon-alert" />
													</p:commandButton>

												</p:commandButton>
											</p:column>
										</p:dataTable>
									</div>
								</p:dataGrid>
							</c:forEach>
							<p:separator></p:separator>
							<f:facet name="footer">
								<t:div styleClass="buttons main">
									<p:commandButton value="Atrás"
										action="#{fichaMineria020Controller.activeIndex(11)}"
										update=":frmFicha020" icon="ui-icon-arrowthick-1-w" />
									<p:commandButton value="Guardar" icon="ui-icon-disk"
										update=":frmFicha020:frmPMA020"
										action="#{planManejoAmbiental020Controller.guardar()}">
									</p:commandButton>
									<p:commandButton value="Siguiente"
										action="#{fichaMineria020Controller.activeIndex(13)}"
										update=":frmFicha020" icon="ui-icon-arrowthick-1-e" />
								</t:div>
							</f:facet>
						</p:panel>
					</p:outputPanel>
</ui:composition>