<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:mae="http://java.sun.com/jsf/composite/mae-composite"
      xmlns:mae-components="http://ec.gob.ambiente/mae-components"
      xmlns:pe="http://primefaces.org/ui/extensions">

<f:loadBundle var="helps"
	basename="ec.gob.ambiente.core.resources.helps_es" />
<h:form>
	<p:panel id="parte10">
		<p:panelGrid columns="2" layout="grid" styleClass="w100"
			columnClasses="w25, field_mrg w25">
			<f:facet name="header">
				<mae:panelGridHeaderHelp
					value="CRONOGRAMA VALORADO DEL PLAN DE MANEJO AMBIENTAL (PMA)"
					conector="generalHelp"
					image="#{request.contextPath}/resources/images/help-how.png"
					help="#{helps['registro.general']}" />
			</f:facet>
			<p:outputLabel value="Plan:"></p:outputLabel>
			<p:selectOneMenu id="cb_plan_cronograma"
				converter="javax.faces.Integer"
				value="#{cronogramaValoradoController.cronogramaValoradoBean.cabeceraId}">
				<f:selectItem noSelectionOption="true"
					itemLabel="Seleccione un plan" itemValue="" />
				<f:selectItems
					value="#{cronogramaValoradoController.obtenerListaProgramas()}"
					var="cabeceraItem" itemValue="#{cabeceraItem.id}"
					itemLabel="#{cabeceraItem.catalogoGeneral.descripcion}" />
			</p:selectOneMenu>
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>
			<p:outputLabel value="Seleccione un Mes:"></p:outputLabel>
			<p:selectManyCheckbox id="cronograma_check" columns="6"
				converter="selectItemConverter" layout="grid"
				value="#{cronogramaValoradoController.cronogramaValoradoBean.mesesSeleccionadosCVPMA}">
				<f:selectItems
					value="#{cronogramaValoradoController.cronogramaValoradoBean.meses}"
					var="mes" itemLabel="#{mes}" itemValue="#{mes}" />
			</p:selectManyCheckbox>
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>
			<p:outputLabel value="Presupuesto:" />
			<p:inputText style="with:600px important;" id="iT"
				value="#{cronogramaValoradoController.cronogramaValoradoBean.presupuesto}"
				converter="javax.faces.Double">
				<f:validateLongRange minimum="18" maximum="50" />
			</p:inputText>
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>
			<p:outputLabel value="Documento de Respaldo:"></p:outputLabel>
			<p:fileUpload uploadLabel="Subir" cancelLabel="Cancelar"
				label="Seleccionar" fileLimit="1" mode="advanced"
				dragDropSupport="false" multiple="false"
				allowTypes="/(\.|\/)(pdf)$/" />
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>
			<p:spacer width="15px"></p:spacer>

			<p:commandButton value="Guardar" id="btnGuardar"
				actionListener="#{cronogramaValoradoController.guardar()}">
				<p:ajax listener="#{cronogramaValoradoController.limpiarDatos()}"
					event="click" update="@form" />
			</p:commandButton>
		</p:panelGrid>
		<p:panelGrid style="width: 100%;" styleClass="w100"
			columnClasses="w100, field_mrg w100">
			<p:dataTable
				rendered="#{cronogramaValoradoController.cronogramaValoradoBean.verCronogramasIngresados}"
				value="#{cronogramaValoradoController.cronogramaValoradoBean.listaPlanes}"
				var="planes">
				<p:column headerText="Plan" width="20%">
					<p:outputLabel value="#{planes.catalogoGeneral.descripcion}" />
				</p:column>
				<p:column headerText="Enero">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 200)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Febrero">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 201)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Marzo">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 202)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Abril">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 203)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Mayo">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 204)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Junio">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 205)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Julio">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 206)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Agosto">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 207)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Septiembre">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 208)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Octubre">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 209)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Noviembre">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 210)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Diciembre">
					<p:selectBooleanCheckbox
						value="#{cronogramaValoradoController.estaSeleccionado(planes.cronogramaValoradoPmas, 211)}"
						disabled="true" />
				</p:column>
				<p:column headerText="Presupuesto">
					<p:outputLabel style="float: right; padding-right: 10px;"
						value="$ USD #{planes.cronogramaValoradoPmas.get(0).presupuesto}"
						disabled="true" />
				</p:column>
				<f:facet name="footer">
					<p:column colspan="3">
						<h:outputLabel value="Total:" />
					</p:column>
					<p:column colspan="10" style="float: right;">
						<h:outputText style="float: right; padding-right: 10px;"
							value="#{cronogramaValoradoController.cronogramaValoradoBean.sumaPresupuesto}">
							<f:convertNumber type="currency" currencySymbol="$ USD" />
						</h:outputText>
					</p:column>
				</f:facet>
			</p:dataTable>
		</p:panelGrid>
	</p:panel>
</h:form>
</html>