<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:pe="http://primefaces.org/ui/extensions"
xmlns:mae="http://java.sun.com/jsf/composite/mae-composite">
<ui:composition
template="/prevencion/licenciamiento-ambiental/eia/default.xhtml">
<ui:define name="content-eia">
<h:form id="frmDatos">
<p:outputLabel value="¿En su proyecto se ha encontrado Limnología?"/>
<p:selectOneRadio required="true"
value="#{puntosMuestreoEIAController.tieneContenido}">
<f:selectItem itemLabel="Sí" itemValue="true"/>
<f:selectItem itemLabel="No" itemValue="false"/>
<p:ajax process="@this"
update="@form"/>
</p:selectOneRadio>
<h:panelGrid columns="1"
rendered="#{puntosMuestreoEIAController.tieneContenido}"
id="inventarioForestal">

<p:panel header="Limnología">

<p:panelGrid columns="1" layout="grid" styleClass="w100"
 id="panelGridFlora">
<f:facet name="header">
<p:outputLabel value="Puntos de muestreo" for="hidPM"/>
<h:inputHidden id="hidPM"
           required="#{empty puntosMuestreoEIAController.listaPuntosMuestreo}"/>
</f:facet>
<f:facet name="header">

<p:commandButton
    styleClass="buttonSeleccionarUbicacion button-small-text toRight field_mrg"
    icon="ui-icon-plusthick" value="Adicionar"
    update=":frmDlg3:panelDatosHDialogo" process="@this"
    action="#{puntosMuestreoEIAController.inicializarPuntoMuestreo()}"
    oncomplete="PF('dlg3').show();"/>

</f:facet>

<p:dataTable id="tablaPuntosMuestreo"
     value="#{puntosMuestreoEIAController.listaPuntosMuestreo}"
     var="ide" paginator="true" rows="10" paginatorPosition="bottom"
     emptyMessage="#{labels['common.table.empty']}"
     paginatorAlwaysVisible="false" sortBy="#{ide.nombrePunto}">
<p:column headerText="Código">
<h:outputText value="#{ide.nombrePunto}"/>
</p:column>
<p:column headerText="Metodología">
<h:outputText value="#{ide.metodologiaPuntoMuestreo.nombre}"
              rendered="#{!ide.metodologiaPuntoMuestreo.otro}"/>
<h:outputText value="#{ide.metodologia}"/>
</p:column>
<p:column headerText="Fecha muestreo">
<h:outputText value="#{ide.fechaMuestreo}"/>
</p:column>
<p:column headerText="Altitud">
<h:outputText value="#{ide.altitude}"/>
</p:column>
<p:column headerText="Índice de Polución Orgánica de Palmer">
<h:outputText value="#{ide.indicePopOrgPalmer}"/>
</p:column>

<p:column styleClass="w40px alCenter">
<p:commandButton icon="ui-icon-pencil"
                 styleClass="button-small primary"
                 action="#{puntosMuestreoEIAController.editarPuntoMuestreo(ide)}"
                 update=":frmDlg3:dlg3" process="@this"
                 oncomplete="PF('dlg3').show()"/>
<p:commandButton icon="ui-icon-circle-close"
                 styleClass="button-small primary"
                 action="#{puntosMuestreoEIAController.removerPuntoMuestreo(ide)}"
                 update="@(.tablaComparacion) @(.tablaAnaDiv) :frmDatos:tablaPuntosMuestreo"
                 process="@this">
    <p:confirm header="Confirmación"
               message="¿Está seguro que desea eliminar este punto?"
               icon="ui-icon-alert"/>
</p:commandButton>
</p:column>
</p:dataTable>

</p:panelGrid>

<p:panelGrid columns="1" layout="grid" styleClass="w100"
 id="panelGridEspecies">
<f:facet name="header">
<p:outputLabel value="Registro de especies" for="hidES"/>
<h:inputHidden id="hidES"
           required="#{empty puntosMuestreoEIAController.listaRegistroEspecies}"/>

</f:facet>
<f:facet name="header">

<p:commandButton
    styleClass="buttonSeleccionarUbicacion button-small-text toRight field_mrg"
    icon="ui-icon-plusthick" value="Adicionar"
    update=":frmDlg4:panelDatosRegistro" process="@this"
    action="#{puntosMuestreoEIAController.inicializarRegistroEspecies()}"
    oncomplete="PF('dlg4').show();"/>

</f:facet>

<p:dataTable id="tablaRegistroEspecies" filterDelay="600"
     value="#{puntosMuestreoEIAController.listaRegistroEspecies}"
     var="regesp" paginator="true" rows="10" paginatorPosition="bottom"
     emptyMessage="#{labels['common.table.empty']}" scrollable="true" scrollWidth="700" scrollHeight="auto"
     paginatorAlwaysVisible="false" sortBy="#{regesp.puntosMuestreo.nombrePunto}">

<p:columnGroup type="header">
<p:row>
    <p:column headerText="Punto de Muestreo" rowspan="2" width="70"
              filterMatchMode="contains" filterBy="#{regesp.puntosMuestreo.nombrePunto}"/>
    <p:column headerText="&lt;/br&gt;Clase" rowspan="2" width="100"
              filterMatchMode="contains" filterBy="#{regesp.clase}"/>
    <p:column headerText="&lt;/br&gt;Orden" rowspan="2" width="100"
              filterMatchMode="contains" filterBy="#{regesp.genero_orden}"/>
    <p:column headerText="&lt;/br&gt;Familia" rowspan="2" width="200"
              filterMatchMode="contains" filterBy="#{regesp.familia}"/>
    <p:column headerText="&lt;/br&gt;Género" rowspan="2" width="100"
              filterMatchMode="contains" filterBy="#{regesp.genero}"/>
    <p:column headerText="&lt;/br&gt;Nombre científico" rowspan="2" width="200"
              filterMatchMode="contains" filterBy="#{regesp.nombreCientifico}"/>
    <p:column  headerText="Nivel de Identificación" rowspan="2" width="100"
               filterMatchMode="contains" filterBy="#{regesp.nivelIdentificacion}"/>
    <p:column  headerText="&lt;/br&gt;Nombre común" rowspan="2" width="200"
               filterMatchMode="contains" filterBy="#{regesp.nombreLocal}"/>
    <p:column  headerText="&lt;/br&gt;N° Ind. Especie" rowspan="2" width="80"
               filterMatchMode="contains" filterBy="#{regesp.individuos}"/>
    <p:column  headerText="" rowspan="2"  width="40"/>
</p:row>

</p:columnGroup>


<p:column>
<h:outputText value="#{regesp.puntosMuestreo.nombrePunto}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.clase}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.genero_orden}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.familia}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.genero}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.nombreCientifico}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.nivelIdentificacion}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.nombreLocal}"/>
</p:column>
<p:column>
<h:outputText value="#{regesp.individuos}"/>
</p:column>

<p:column styleClass="w40px alCenter">
<p:commandButton icon="ui-icon-pencil"
                 styleClass="button-small primary"
                 action="#{puntosMuestreoEIAController.editarRegistroEspecies(regesp)}"
                 update=":frmDlg4:dlg4" process="@this"
                 oncomplete="PF('dlg4').show()"/>
<p:commandButton icon="ui-icon-circle-close"
                 styleClass="button-small primary"
                 action="#{puntosMuestreoEIAController.removerRegistroEspecies(regesp)}"
                 update="@(.tablaComparacion)@(.tablaIndiceCalAgua) @(.tablaAnaDiv) :frmDatos:tablaRegistroEspecies"
                 process="@this">
    <p:confirm header="Confirmación"
               message="¿Está seguro que desea eliminar este registro?"
               icon="ui-icon-alert"/>
</p:commandButton>
</p:column>
</p:dataTable>

</p:panelGrid>

<p:panelGrid columns="1" layout="grid" styleClass="w100"
 id="panelGridAnalDiv">
<f:facet name="header">
<p:outputLabel value="Análisis de Diversidad" for="hisAnaDiv"/>
<h:inputHidden id="hisAnaDiv"
           required="#{empty puntosMuestreoEIAController.listaRegistroEspecies}"/>
</f:facet>
<p:dataTable id="tablaAnaDiv" styleClass="tablaAnaDiv"
     value="#{puntosMuestreoEIAController.listaAnalisisDiversidad}"
     var="anaDiv" paginator="true" rows="10" paginatorPosition="bottom"
     emptyMessage="#{labels['common.table.empty']}"
     paginatorAlwaysVisible="false" sortBy="#{anaDiv.puntosMuestreoEIA.nombrePunto}">

<p:columnGroup type="header">
<p:row>
    <p:column headerText="Punto de Muestreo"/>
    <p:column headerText="Shannon-Wiener"/>
    <p:column headerText="Simpson"/>
    <p:column headerText="Riqueza"/>
    <p:column headerText="Abundancia"/>

</p:row>
</p:columnGroup>

<p:column>
<h:outputText value="#{anaDiv.puntosMuestreoEIA.nombrePunto}"/>
</p:column>
<p:column>
<h:outputText value="#{anaDiv.shannon}"/>
</p:column>
<p:column>
<h:outputText value="#{anaDiv.simpson}"/>
</p:column>
<p:column>
<h:outputText value="#{anaDiv.riqueza}"/>
</p:column>
<p:column>
<h:outputText value="#{anaDiv.abundancia}"/>
</p:column>

</p:dataTable>

</p:panelGrid>

<p:panelGrid columns="1" layout="grid" styleClass="w100"
 id="panelGridSimilitudes">
<f:facet name="header">
<mae:panelGridHeaderHelp value="Cálculo de índice de similitudes de Jaccard y Sorensen"
                     conector="generalHelp"
                     help="#{msg['message.help.flora.jaccardsorensen']}"/>
</f:facet>
<p:dataTable value="#{puntosMuestreoEIAController.listaComparacionPtos}" var="comp"  id="tablaComparacion"
     styleClass="tablaComparacion" filterDelay="100" widgetVar="bandejaTable" rows="10"
     paginatorAlwaysVisible="false" paginator="true" paginatorPosition="bottom" sortBy="#{comp.puntoMuestreoA}"
     filteredValue="#{puntosMuestreoEIAController.listaComparacionPtosFiltrados}">

<p:column headerText="Punto de Muestreo A" filterMatchMode="contains" filterBy="#{comp.puntoMuestreoA}"
      styleClass="alCenter singleLine">
<h:outputText value="#{comp.puntoMuestreoA}"/>

</p:column>
<p:column headerText="Punto de Muestreo B" filterMatchMode="contains" filterBy="#{comp.puntoMuestreoB}"
      styleClass="alCenter singleLine">
<h:outputText value="#{comp.puntoMuestreoB}"/>

</p:column>
<p:column headerText="Jaccard" styleClass="alCenter singleLine">
<h:outputText value="#{comp.jaccard}"/>

</p:column>
<p:column headerText="Sorensen" styleClass="alCenter singleLine">
<h:outputText value="#{comp.sorensen}"/>

</p:column>

<p:column styleClass="alCenter w10">
<f:facet name="header" headerText=""/>
<p:commandButton id="btnAdicionarComparacion"
                 rendered="#{comp!=null and !comp.agregado}"
                 styleClass="primary"
                 icon="ui-icon-plusthick"
                 title="Añadir comparación #{comp.puntoMuestreoA}-#{comp.puntoMuestreoB} "
                 update="@(.tablaComparacionesGuardar) @(.tablaComparacion)"
                 actionListener="#{puntosMuestreoEIAController.agregarComparacion(comp)}"/>
</p:column>
</p:dataTable>

<p:dataTable id="tablaComparacionesGuardar" styleClass="tablaComparacionesGuardar" filterDelay="600"
     value="#{puntosMuestreoEIAController.listaComparacionesPtos}"
     var="compGuardar" paginator="true" rows="10" paginatorPosition="bottom"
     emptyMessage="#{labels['common.table.empty']}"
     paginatorAlwaysVisible="false" sortBy="#{compGuardar.muestraA.nombrePunto}">

<p:columnGroup type="header">
<p:row>
    <p:column headerText="Punto de Muestreo A"
              filterMatchMode="contains" filterBy="#{compGuardar.muestraA.nombrePunto}"/>
    <p:column headerText="Punto de Muestreo B"
              filterMatchMode="contains" filterBy="#{compGuardar.muestraB.nombrePunto}"/>
    <p:column headerText="Jaccard"/>
    <p:column headerText="Sorensen"/>
    <p:column headerText="" width="25"/>
</p:row>
</p:columnGroup>

<p:column>
<h:outputText value="#{compGuardar.muestraA.nombrePunto}"/>
</p:column>
<p:column>
<h:outputText value="#{compGuardar.muestraB.nombrePunto}"/>
</p:column>
<p:column>
<h:outputText value="#{compGuardar.jaccard}"/>
</p:column>
<p:column>
<h:outputText value="#{compGuardar.sorensen}"/>
</p:column>
<p:column>
<p:commandButton icon="ui-icon-circle-close"
                 styleClass="button-small primary"
                 action="#{puntosMuestreoEIAController.removerComparacion(compGuardar)}"
                 update="@(.tablaComparacion) @(.tablaComparacionesGuardar)"
                 process="@this">
    <p:confirm header="Confirmación"
               message="¿Está seguro que desea eliminar esta comparación?"
               icon="ui-icon-alert"/>
</p:commandButton>
</p:column>
</p:dataTable>

</p:panelGrid>

</p:panel>
</h:panelGrid>
<h:panelGrid columns="1"
rendered="#{not puntosMuestreoEIAController.tieneContenido}"
id="justificacion">

<p:outputLabel value="Justificación" for="just"/>

<p:inputTextarea id="just" readonly="false"
 value="#{puntosMuestreoEIAController.justificacionEIA.justificacion}" required="true"
 cols="100" rows="7" maxlength="1000"
 styleClass="w100" autoResize="false"/>

</h:panelGrid>

<div class="buttons main">

<p:commandButton value="Atrás" immediate="true" process="@this"
 action="/prevencion/licenciamiento-ambiental/eia/medioBiotico/macroinvertebrados.jsf?id=macroinvertebrados&amp;faces-redirect=true"
 icon="ui-icon-arrowthick-1-w"/>

<p:commandButton value="Guardar" icon="ui-icon-check"
 update="@form"
 actionListener="#{puntosMuestreoEIAController.guardar('limnofauna')}"/>

<p:commandButton value="Siguiente" immediate="true" process="@this" rendered="#{!resumenEjecutivoBean.proyectoHidrocarburos}"
 action="/prevencion/tdr/utils/medioSocial.jsf?&amp;faces-redirect=true"
 icon="ui-icon-arrowthick-1-e"/>

    <p:commandButton value="Siguiente" immediate="true" process="@this" rendered="#{resumenEjecutivoBean.proyectoHidrocarburos}"
                     action="/prevencion/licenciamiento-ambiental/eia/descripcionObraActividad/descripcionProyectoObraActividad.jsf?&amp;faces-redirect=true"
                     icon="ui-icon-arrowthick-1-e"/>

</div>

</h:form>

<h:form id="frmDlg3">
<p:dialog id="dlg3" header="Punto de muestreo" widgetVar="dlg3"
modal="true" width="600" height="450" resizable="true" draggable="false">

<p:tooltip for="punto" escape="false" showDelay="1200" trackMouse="true">
<h:outputText value="#{msg['message.help.limnofauna.codigo']}" escape="false"/>
</p:tooltip>
<h:panelGrid id="panelDatosHDialogo" columns="1"
styleClass="w100 separatorBottom"
columnClasses="w50, field_mrg w50">

<h:panelGrid columns="2" styleClass="w15 separatorBottom" columnClasses="w97,3">
<p:outputLabel id="pLabel" for="punto" value="Código"/>
<mae:btnHelp help="#{msg['message.help.limnofauna.codigo']}" conector="ayudaDesechos"
     buttonStyleClass="button-small toRight field_mrg primary"/>
</h:panelGrid>
<p:inputText id="punto" required="true" maxlength="5" converter="toUpperCaseConverter"
 value="#{puntosMuestreoEIAController.puntosMuestreoEIA.nombrePunto}"
 styleClass="w100">
<p:ajax event="blur" process="@this" update="@this"/>
</p:inputText>


<p:outputLabel for="metodologia" value="Metodología"/>

<p:selectOneMenu id="metodologia" required="true" styleClass="w100"
     value="#{puntosMuestreoEIAController.puntosMuestreoEIA.metodologiaPuntoMuestreo}"
     converter="selectItemConverter">

<f:selectItem itemLabel="#{labels['common.item.choose']}"
      itemValue="" noSelectionOption="true"/>
<f:selectItems
value="#{puntosMuestreoEIAController.metodologiaPuntoMuestreos}"
var="muestra" itemLabel="#{muestra.nombre}" itemValue="#{muestra}"/>

<p:ajax process="@this" update=":frmDlg3:panelDatosHDialogo"/>
</p:selectOneMenu>
<p:outputLabel for="metodologiaOtros" value="Nombre de la metodología"
   rendered="#{puntosMuestreoEIAController.puntosMuestreoEIA.metodologiaPuntoMuestreo.otro}"/>
<p:inputTextarea id="metodologiaOtros" readonly="false"
     rendered="#{puntosMuestreoEIAController.puntosMuestreoEIA.metodologiaPuntoMuestreo.otro}"
     value="#{puntosMuestreoEIAController.puntosMuestreoEIA.metodologia}" required="true"
     cols="100" rows="7" maxlength="1000"
     styleClass="w100" autoResize="false"><p:ajax/></p:inputTextarea>

<p:outputLabel for="fechaMuestreo" value="Fecha muestreo"/>
<p:calendar id="fechaMuestreo" readonlyInput="true"
value="#{puntosMuestreoEIAController.puntosMuestreoEIA.fechaMuestreo}"
locale="es" navigator="true" pattern="dd-MM-yyyy" required="true"
maxdate="#{puntosMuestreoEIAController.currentDate}"><p:ajax
event="dateSelect"/></p:calendar>

<p:outputLabel for="altitud" value="Altitud"/>
<pe:inputNumber id="altitud" maxValue="5000" decimalPlaces="2" thousandSeparator=""
    value="#{puntosMuestreoEIAController.puntosMuestreoEIA.altitude}"
    required="true" styleClass="w100"><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="ipop" value="Índice de polución orgánica Palmer"/>
<h:inputHidden/>
<pe:inputNumber id="ipop" maxValue="100000000000" decimalPlaces="0" thousandSeparator=""
    value="#{puntosMuestreoEIAController.puntosMuestreoEIA.indicePopOrgPalmer}"
    required="true" styleClass="w100"/>

<p:panelGrid id="panelDatosCoord" columns="4"
 styleClass="w100 separatorBottom">
<f:facet name="header">
<mae:panelGridHeaderHelp value="Coordenadas"
                     conector="generalHelp"
                     help="#{msg['message.help.flora.coordenada']}"/>
</f:facet>

<p:outputLabel for="x1" value="X1 (Este)" style="margin:15%;"/>

<pe:inputNumber id="x1" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.x1}"
        required="true" styleClass="w100">
<f:validateLength minimum="6"/><p:ajax process="@this"/>
</pe:inputNumber>

<p:outputLabel for="y1" value="Y1 (Norte)" style="margin:15%;"/>

<pe:inputNumber id="y1" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.y1}"
        required="true" styleClass="w100">
<f:validateLength minimum="7"/><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="x2" value="X2 (Este)" style="margin:15%;"/>

<pe:inputNumber id="x2" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.x2}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="6"/><p:ajax process="@this"/>
</pe:inputNumber>

<p:outputLabel for="y2" value="Y2 (Norte)" style="margin:15%;"/>

<pe:inputNumber id="y2" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.y2}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="7"/><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="x3" value="X3 (Este)" style="margin:15%;"/>

<pe:inputNumber id="x3" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.x3}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="6"/><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="y3" value="Y3 (Norte)" style="margin:15%;"/>

<pe:inputNumber id="y3" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.y3}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="7"/><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="x4" value="X4 (Este)" style="margin:15%;"/>

<pe:inputNumber id="x4" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.x4}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="6"/><p:ajax/>
</pe:inputNumber>

<p:outputLabel for="y4" value="Y4 (Norte)" style="margin:15%;"/>

<pe:inputNumber id="y4" decimalPlaces="2" thousandSeparator=""
        value="#{puntosMuestreoEIAController.puntosMuestreoEIA.y4}"
        styleClass="w100" converter="replaceDoubleNullValue">
<f:validateLength minimum="7"/><p:ajax/>
</pe:inputNumber>
</p:panelGrid>
</h:panelGrid>

<p:separator/>

<div class="buttons">
<p:commandButton
actionListener="#{puntosMuestreoEIAController.agregarPuntoMuestreo()}"
process="@this :frmDlg3:dlg3" value="Aceptar"
update="@(.tablaComparacion) @(.tablaAnaDiv) @(.tablaIndiceCalAgua) :frmDatos:tablaPuntosMuestreo panelDatosHDialogo
:frmDatos:panelGridEspecies"
oncomplete="showModalPuntosMuestreo(xhr, status, args)"/>
<p:commandButton value="Cancelar" type="button"
     onclick="PF('dlg3').hide()" styleClass="secondary"/>
</div>
<br/>
<script type="text/javascript">
function showModalPuntosMuestreo(xhr, status, args) {
if (args.puntoMuestreo)
PF('dlg3').hide();
else
PF('dlg3').show();
}
</script>

</p:dialog>
</h:form>

<h:form id="frmDlg4">
<p:dialog id="dlg4" header="Registro de especies" widgetVar="dlg4"
modal="true" width="600" height="330" resizable="false" draggable="false">

<h:panelGrid id="panelDatosRegistro" columns="2"
styleClass="w100 separatorBottom panelDatosRegistro"
columnClasses="w50, field_mrg w50">

<p:outputLabel for="punto1" value="Punto de muestreo"/>
<p:outputLabel for="clase" value="Clase"/>


<p:selectOneMenu id="punto1" required="true" styleClass="w100"
     value="#{puntosMuestreoEIAController.registroEspeciesEIA.puntosMuestreo}"
     converter="selectItemConverter">

<f:selectItem itemLabel="#{labels['common.item.choose']}"
      itemValue="" noSelectionOption="true"/>
<f:selectItems
value="#{puntosMuestreoEIAController.listaPuntosMuestreo}"
var="con" itemLabel="#{con.nombrePunto}" itemValue="#{con}"/>

<p:ajax process="@this" update="@this"/>
</p:selectOneMenu>
<p:inputText id="clase" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.clase}"
 styleClass="w100" maxlength="100">
</p:inputText>

<p:outputLabel for="orden" value="Orden"/>
<p:outputLabel for="familia" value="Familia"/>

<p:inputText id="orden" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.genero_orden}"
 styleClass="w100" maxlength="100"/>
<p:inputText id="familia" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.familia}"
 styleClass="w100" maxlength="100"/>

<p:outputLabel for="genero" value="Género"/>
<p:outputLabel for="nombreCientifico" value="Nombre científico"/>

<p:inputText id="genero" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.genero}"
 styleClass="w100" maxlength="50">
</p:inputText>
<p:inputText id="nombreCientifico" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.nombreCientifico}"
 styleClass="w100" maxlength="100">
</p:inputText>

<p:outputLabel for="nivelIde" value="Nivel de identificación"/>
<p:outputLabel for="nombreComun" value="Nombre común"/>

<p:selectOneMenu id="nivelIde" required="true" styleClass="w100"
     value="#{puntosMuestreoEIAController.registroEspeciesEIA.nivelIdentificacion}">

<f:selectItem itemLabel="#{labels['common.item.choose']}"
      itemValue="" noSelectionOption="true"/>
<f:selectItems
value="#{puntosMuestreoEIAController.nivelIdentificacion}"
var="con" itemLabel="#{con.descripcion}"
itemValue="#{con.descripcion}"/>
<p:ajax process="@this"/>
</p:selectOneMenu>

<p:inputText id="nombreComun" required="true"
 value="#{puntosMuestreoEIAController.registroEspeciesEIA.nombreLocal}"
 styleClass="w100" maxlength="100">
</p:inputText>

<p:outputLabel for="nroIndividuos"
   value="Nro. de individuos por especie"/>
<h:inputHidden/>
<pe:inputNumber id="nroIndividuos" maxValue="1000000000" decimalPlaces="0" thousandSeparator=""
    value="#{puntosMuestreoEIAController.registroEspeciesEIA.individuos}"
    required="true" styleClass="w100">
</pe:inputNumber>

</h:panelGrid>
<p:separator/>

<div class="buttons">
<p:commandButton
actionListener="#{puntosMuestreoEIAController.agregarRegistroEspecies()}"
process="@this :frmDlg4:panelDatosRegistro" value="Aceptar"
update="@(.tablaComparacion) @(.tablaAnaDiv) :frmDatos:tablaRegistroEspecies @(.tablaIndiceCalAgua) panelDatosRegistro "
oncomplete="showModalRegistroEspecies(xhr, status, args)"/>
<p:commandButton value="Cancelar" type="button"
     onclick="PF('dlg4').hide()" styleClass="secondary"/>
</div>

<script type="text/javascript">
function showModalRegistroEspecies(xhr, status, args) {
if (args.registroEspecies)
PF('dlg4').hide();
else
PF('dlg4').show();
}
</script>

</p:dialog>
</h:form>

</ui:define>
</ui:composition>
</html>