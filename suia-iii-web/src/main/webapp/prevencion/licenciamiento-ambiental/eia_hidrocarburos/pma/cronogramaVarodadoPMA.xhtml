<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:control="http://java.sun.com/jsf/composite/controles-prime">
	<ui:define name="content">
		<ui:include src="../contenido/menu.xhtml" />
		<div class="content">

			<h:form id="frm_cronograma_valorado">
				<p:growl id="messages" showDetail="true" />

				<p:dataTable id="tbl_cronograma_valorado" var="cronograma"
					scrollable="true" scrollWidth="800"
					value="#{cronogramaPMA.listaCronograma}">
					<f:facet name="header">
			            	Cronograma valorado plan de manejo ambiental
						</f:facet>

					<p:columnGroup type="header">
						<p:row>
							<p:column headerText="" width="25" />
							<p:column headerText="Plan" width="150" />
							<p:column headerText="Mes 1" width="50" />
							<p:column headerText="Mes 2" width="50" />
							<p:column headerText="Mes 3" width="50" />
							<p:column headerText="Mes 4" width="50" />
							<p:column headerText="Mes 5" width="50" />
							<p:column headerText="Mes 6" width="50" />
							<p:column headerText="Mes 7" width="50" />
							<p:column headerText="Mes 8" width="50" />
							<p:column headerText="Mes 9" width="50" />
							<p:column headerText="Mes 10" width="50" />
							<p:column headerText="Mes 11" width="50" />
							<p:column headerText="Mes 12" width="50" />
							<p:column headerText="Presupuesto" width="50" />
						</p:row>
					</p:columnGroup>
					<p:column style="width:32px;text-align:center">
						<p:commandButton title="Editar"
							action="#{cronogramaPMA.editarValores(cronograma)}"
							oncomplete="PF('dlgValores').show();"
							update=":#{p:component('tbl_cronograma_valorado')}, :#{p:component('dlgValores')}"
							icon="ui-icon-pencil">
						</p:commandButton>
					</p:column>
					<p:column styleClass="celeste">
						<h:outputText value="#{cronograma.tipoPlanManejoAmbiental.tipo}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes1}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes2}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes3}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes4}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes5}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes6}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes7}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes8}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes9}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes10}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes11}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.mes12}" />
					</p:column>
					<p:column>
						<h:outputText value="#{cronograma.presupuesto}" />
					</p:column>

					<p:columnGroup type="footer">
						<p:row>
							<p:column style="text-align:center" styleClass="rojo"
								footerText="" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="Totales:" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes1}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes2}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes3}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes4}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes5}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes6}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes7}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes8}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes9}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes10}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes11}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumMes12}" />
							<p:column style="text-align:center;font-weight:bold;" styleClass="rojo"
								footerText="#{cronogramaPMA.sumPresupuesto}" />
						</p:row>
					</p:columnGroup>
				</p:dataTable>

				<div class="buttons main">
					<p:commandButton value="Aceptar" icon="ui-icon-check"
						action="#{cronogramaPMA.guardarCronograma()}" />
					<p:commandButton value="Cancelar" styleClass="secondary"
						icon="ui-icon-cancel" action="#{cronogramaPMA.cancelar}"
						process="@this">
						<p:confirm header="Confirmación"
							message="¿Está seguro de salir del registro de cronograma valorado?"
							icon="ui-icon-alert" />
					</p:commandButton>
				</div>
			</h:form>

			<p:dialog header="Valores" widgetVar="dlgValores" id="dlgValores"
				modal="true" resizable="false" draggable="false"
				style="overflow: auto;" width="550" height="350">
				<h:form>
					<p:separator />

					<h:panelGrid columns="2" id="dg_valores" styleClass="w100"
						columnClasses="w33, field_mrg w33, field_mrg w33">

						<p:outputLabel for="txt_mes1" value="Mes 1" />
						<p:outputLabel for="txt_mes2" value="Mes 2" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes1}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes1" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes2}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes2" />

						<p:outputLabel for="txt_mes3" value="Mes 3" />
						<p:outputLabel for="txt_mes4" value="Mes 4" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes3}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes3" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes4}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes4" />

						<p:outputLabel for="txt_mes5" value="Mes 5" />
						<p:outputLabel for="txt_mes6" value="Mes 6" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes5}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes5" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes6}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes6" />

						<p:outputLabel for="txt_mes7" value="Mes 7" />
						<p:outputLabel for="txt_mes8" value="Mes 8" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes7}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes7" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes8}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes8" />

						<p:outputLabel for="txt_mes9" value="Mes 9" />
						<p:outputLabel for="txt_mes10" value="Mes 10" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes9}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes9" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes10}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes10" />

						<p:outputLabel for="txt_mes11" value="Mes 11" />
						<p:outputLabel for="txt_mes12" value="Mes 12" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes11}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes11" />

						<p:inputText value="#{cronogramaPMA.cronograma.mes12}"
							onkeypress="return NumCheckDouble(event,this);" styleClass="w100"
							id="txt_mes12" />

					</h:panelGrid>

					<p:separator />

					<p:commandButton value="Agregar" icon="ui-icon-plusthick"
						oncomplete="handlePunto1Request(xhr, status, args)"
						action="#{cronogramaPMA.agregarValores()}"
						update=":#{p:component('messages')}, :#{p:component('tbl_cronograma_valorado')}, :#{p:component('dlgValores')}" />

				</h:form>
			</p:dialog>
			<script type="text/javascript">
			        function handlePunto1Request(xhr, status, args) {
			            if (args.validationFailed || !args.puntoIn) {
			            	PF('dlgValores').show();
			            }
			            else {
			                PF('dlgValores').hide();
			                $('#loginLink').fadeOut();
			            }
			        }
				    </script>

		</div>
	</ui:define>
</ui:composition>
