<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:mae="http://java.sun.com/jsf/composite/mae-composite">

<p:panelGrid columns="1" layout="grid" styleClass="w100">
	<f:facet name="header">
		<p:commandButton value="Adicionar" oncomplete="PF('dialogoSeleccionarPermiso').show()" process="@this :form:permisosCantidadesContainer" update="dialogoSeleccionarPermiso :form:tbl_permisos :form:permisosCantidadesContainer" actionListener="#{permisoAmbientalBean.init()}" styleClass="button-small-text toRight field_mrg" icon="ui-icon-plusthick" />
		<h:outputText value="Permiso(s) ambiental(es) *" />
	</f:facet>

	<p:dataList id="tbl_permisos" value="#{permisoAmbientalBean.prestadoresServiciosSeleccionados}" type="none" rowIndexVar="index" var="permiso" emptyMessage="#{labels['common.table.empty']}">
		<p:panelGrid columns="2" layout="grid" styleClass="w100" columnClasses="w50, field_mrg w50">
			<f:facet name="header">
				<h:outputText value="Permiso ambiental #{index + 1}" />
				<p:commandButton update=":form:tbl_permisos :form:tablePermisos :form:permisosCantidadesContainer :form:#{adicionarTipoEliminacionAliasBean.tipoEliminacionDesechoContainer}" styleClass="button-small toRight field_mrg" process="@this :form:permisosCantidadesContainer" icon="ui-icon-trash" actionListener="#{permisoAmbientalBean.eliminarPrestadorSeleccionado(permiso)}" />
			</f:facet>
			<h:panelGrid styleClass="panel_data w100" columns="2" columnClasses="header, null" rowClasses="null, alt">
				<h:outputText value="Nombre" />
				<h:outputText value="#{permiso.sedePrestadorServiciosDesechos.prestadorServiciosDesechos.nombre}" />
				<h:outputText value="Provincia" />
				<h:outputText value="#{permiso.sedePrestadorServiciosDesechos.ubicacionesGeografica.ubicacionesGeografica}" />
				<h:outputText value="Cant贸n" />
				<h:outputText value="#{permiso.sedePrestadorServiciosDesechos.ubicacionesGeografica}" />
				<h:outputText value="Permiso ambiental" />
				<h:outputText value="#{permiso.sedePrestadorServiciosDesechos.codigoPermisoAmbiental}" />
			</h:panelGrid>
			<h:panelGrid styleClass="panel_data w100" columns="2" columnClasses="header, null" rowClasses="null, alt">
				<h:outputText value="Fecha emisi贸n" />
				<h:outputText value="#{permiso.sedePrestadorServiciosDesechos.fechaPermisoAmbiental}">
					<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
				</h:outputText>
				<h:outputText value="Tipo eliminaci贸n" />
				<h:outputText value="#{permiso.tipoEliminacionDesecho}" />
				<h:outputText value="Fase gesti贸n" />
				<h:outputText value="#{permiso.faseGestionDesecho}" />
			</h:panelGrid>
		</p:panelGrid>
	</p:dataList>

</p:panelGrid>
<ui:include src="/prevencion/registrogeneradordesechos/utiles/seleccionarPermisoAmbientalModal.xhtml" />
</html>