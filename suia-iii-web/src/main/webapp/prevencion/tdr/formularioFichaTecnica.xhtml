<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:mae-components="http://ec.gob.ambiente/mae-components"
	xmlns:control="http://java.sun.com/jsf/composite/controles-prime">
<ui:composition template="/WEB-INF/templates/default.xhtml">

	<ui:define name="content">


		<h:form id="formularioTDR">

			<f:viewParam name="area" value="#{ingresarTDRBean.area}" />

			<h:outputText style="font-weight:bold"
				value="#{ingresarTDRBean.area} " />
			<p:panel>
				<h:panelGrid layout="grid" columns="1" styleClass="w100">
					<h:panelGrid columns="2" columnClasses="w25 alTop,field_mrg alTop"
						styleClass="w100">
						<f:facet name="header">
							<h:outputText value="Resumen del Proyecto"
								styleClass="encabezado1_1em alLeft" />
						</f:facet>

						<h:outputText style="font-weight:bold" value="Proponente " />
						<h:outputText
							value="#{ingresarTDRBean.proyectoActivo.usuario.nombrePersona}" />
						<h:outputText style="font-weight:bold" value="C&oacute;digo " />
						<h:outputText value="#{ingresarTDRBean.proyectoActivo.codigo}" />
						<h:outputText style="font-weight:bold" value="Nombre " />
						<h:outputText value="#{ingresarTDRBean.proyectoActivo.nombre}" />
						<h:outputText style="font-weight:bold" value="Fecha de Registro " />
						<h:outputText
							value="#{ingresarTDRBean.proyectoActivo.fechaRegistro}" />
						<h:outputText style="font-weight:bold" value="Â¿Intersecta? " />
						<h:outputText value='#{ingresarTDRBean.interseca==true?"Si":"No"}' />



						<p:outputLabel rendered="#{ingresarTDRBean.corregir}">Oficio de Observaciones TRDs</p:outputLabel>
						<p:fragment>
							<p:commandButton rendered="#{ingresarTDRBean.corregir}"
								icon="ui-icon-search" onclick="PF('dlg3').show();" />
						</p:fragment>


					</h:panelGrid>
				</h:panelGrid>
				<h:panelGrid columns="2" columnClasses="w25 alTop,field_mrg alTop"
					styleClass="w100">
					<p:fragment>
						<p:panel>
							<h:panelGrid columns="1">
								<h:outputText value="TDR Estudio de Impacto Ambiental"
									styleClass="encabezado1_5em alLeft" />
								<p:commandLink id="datosGeneralesTdrEia"
									value="#{msg['label.fichaTecnica']}"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/registerTdr1.xhtml"}'
									update=":formularioTDR"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/registerTdr1.xhtml')}" />
								<p:commandLink id="introduccionTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/introduccion.xhtml"}'
									value="#{msg['label.introductionTdrEia']}"
									update=":formularioTDR"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/introduccion.xhtml')}" />
								<p:commandLink id="diagnosticoAmbientalTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/diagnosticoAmbientalLineaBase.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.environmentalAssessmentTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/diagnosticoAmbientalLineaBase.xhtml')}" />
								<p:commandLink id="descripcionActividadesTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/descripcionDelProyecto.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.projectDescriptionTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/descripcionDelProyecto.xhtml')}" />
								<p:commandLink id="determinacionAreaInfluenciaTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/determinacionAreaInfluenciaOGestionYAreasSensibles.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.influeciaAreaDeterminationTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/determinacionAreaInfluenciaOGestionYAreasSensibles.xhtml')}" />
								<p:commandLink id="resultadosAuditoriaTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/identEvalValoracImpactosAmbientalesYAnalisisRiesgos.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.identificationAssessmentImpactsTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/identEvalValoracImpactosAmbientalesYAnalisisRiesgos.xhtml')}" />
								<p:commandLink update=":formularioTDR"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/identSitiosContamYValoracBienesYServiciosAmbientales.xhtml"}'
									id="identificationEvaluationEnvironmentalLibiliates"
									value="#{msg['label.identificationEvaluationEnvironmentalLibiliates']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/identSitiosContamYValoracBienesYServiciosAmbientales.xhtml')}" />
								<p:commandLink id="planManejoTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/planManejoAmbiental.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.managmentPlanEnvironmentalTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/planManejoAmbiental.xhtml')}" />
								<p:commandLink id="planMonitoreoTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/planMonitoreo.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.monitoringPlanTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/planMonitoreo.xhtml')}" />
								<p:commandLink id="forestInventoryTdrEia"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/inventarioForestal.xhtml"}'
									update=":formularioTDR"
									value="#{msg['label.forestInventoryTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/inventarioForestal.xhtml')}" />
								<p:commandLink id="anexosTdrEia" update=":formularioTDR"
									disabled='${ingresarTDRBean.urlPage=="fichaTecnica/anexos.xhtml"}'
									value="#{msg['label.annexesTdrEia']}"
									action="#{ingresarTDRBean.actualizarPagina('fichaTecnica/anexos.xhtml')}" />
							</h:panelGrid>
						</p:panel>
					</p:fragment>
					<p:panel id="panelFormularioInterno">
						<ui:include src="#{ingresarTDRBean.urlPage}" />
					</p:panel>


				</h:panelGrid>
				<div class="buttons main panelInterno">
					<p:commandButton rendered="#{ingresarTDRBean.validarTdr()}"
						process="@this" value="#{msg['label.tdr.iniciarProceso']}"
						action="#{iniciarTdrController.iniciarProceso}"
						icon="ui-icon-check" styleClass="large" />
					<p:commandButton styleClass="large" process="@this"
						rendered="#{ingresarObservacionesTDRController.validarObservaciones() }"
						value="#{msg['label.tdr.enviarObservaciones']}"
						action="#{ingresarObservacionesTDRController.enviarObservaciones()}"
						icon="ui-icon-check" />
					<p:commandButton styleClass="large"
						action="#{ingresarTDRController.descargarArchivo()}"
						value="PDF proponente" icon="ui-icon-check" ajax="false"
						rendered="#{ingresarTDRBean.validarTdr()}" immediate="true" />
				</div>

			</p:panel>
			<p:dialog header="Iniciar proceso" modal="true"
				widgetVar="iniciarProceso" minHeight="40">
				<h:panelGrid styleClass="w100 alLeft">
					<h:outputText value="#{msg['label.tdr.iniciarProcesoListo']}" />
					<p:commandButton rendered="#{ingresarTDRBean.validarTdr()}"
						value="#{msg['label.tdr.iniciarProceso']}"
						action="#{iniciarTdrController.iniciarProceso}" />
				</h:panelGrid>
			</p:dialog>
			<p:dialog header="Iniciar proceso" modal="true"
				widgetVar="enviarObservaciones" minHeight="40">
				<h:panelGrid styleClass="w100 alLeft">
					<h:outputText
						value="#{msg['label.tdr.enviarObservacionesCompletadas']}" />
					<p:commandButton
						rendered="#{ingresarObservacionesTDRController.validarObservaciones() }"
						value="#{msg['label.tdr.enviarObservaciones']}"
						action="#{ingresarObservacionesTDRController.enviarObservaciones()}" />


				</h:panelGrid>
			</p:dialog>
		</h:form>
		<h:form id="descargar_oficio" rendered="#{ingresarTDRBean.corregir}">
			<p:dialog header="Oficio de Observaciones TRDs" widgetVar="dlg3"
				modal="true" height="400">
				<mae-components:readOnly>
					<ui:include src="tdrVistaPreviaArea.xhtml">
					</ui:include>
				</mae-components:readOnly>
			</p:dialog>
		</h:form>

	</ui:define>
</ui:composition>
</html>