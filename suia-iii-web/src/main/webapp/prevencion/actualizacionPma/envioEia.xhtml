<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">
<ui:composition template="/prevencion/licenciamiento-ambiental/eia/default.xhtml">
    <ui:define name="content-eia">
        <f:event type="preRenderView" listener="#{finalizarEIABean.validarTareaBpm()}"/>
        <style>
            ul.error {
                padding: 0;
            }

            ul.error li {
                list-style: none;
            }
        </style>
        <h:form id="frmEnviar">
            <h2 class="verde">Estudio de Impacto Ambiental</h2>

            <p>Estimado usuario, verifique que toda la información necesaria para el Estudio de Impacto Ambiental esté ingresada.</p>

            <p>Si la información ingresada es correcta envie el estudio para que un técnico lo revise.</p>
            <p:dialog header="Estudio de Impacto Ambiental incompleto" widgetVar="estudioIncompleto"
                      id="estudioIncompleto" modal="true" height="300">
                <h:outputText value="Debe terminar de ingresar la información en las siguientes secciones:"/>

                <ul class="error alLeft text-red ">
                    <li><h:outputLink class="text-red " rendered="#{!eia.seccionCompletada('resumenEjecutivo')}"
                                      value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/resumenEjecutivo/resumenEjecutivo#{mode}.jsf?">
                        <h:outputText value="Resumen ejecutivo"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('fichaTecnicaEIA')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/ficha/fichaTecnicaEIA#{mode}.jsf">
                        <h:outputText value="Ficha técnica"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('adjuntos')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/adjuntos/adjuntos#{mode}.jsf?id=1">
                        <h:outputText value="Siglas y abreviaturas"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('introduccion')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/introduccion/introduccion#{mode}.jsf">
                        <h:outputText value="Introducción"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('marcoLegalEia')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/marcoLegalEia/marcoLegalEia#{mode}.jsf">
                        <h:outputText value="Marco legal e institucional"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('definicionAreaEstudio')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/definicionAreaEstudio/definicionAreaEstudio#{mode}.jsf">
                        <h:outputText value="Definición del área de estudio"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('adjuntos14')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/adjuntos/adjuntos#{mode}.jsf?id=14">
                        <h:outputText value="Diagnóstico ambiental - Línea base"/>
                    </h:outputLink></li>
                    <ul>
                        <li><h:outputLink
                                class="text-red " rendered="#{!eia.seccionCompletada('adjuntos12')}"
                                value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/adjuntos/adjuntos#{mode}.jsf?id=12">
                            <h:outputText value="Medio físico"/>
                        </h:outputLink></li>
                        <li><h:outputLink
                                class="text-red " rendered="#{!eia.seccionCompletada('adjuntos13')}"
                                value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/adjuntos/adjuntos#{mode}.jsf?id=13">
                            <h:outputText value="Medio biótico"/>
                        </h:outputLink></li>
                    </ul>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('descripcionProyectoObraActividad')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/descripcionObraActividad/descripcionProyectoObraActividad#{mode}.jsf?id=18">
                        <h:outputText value="Descripción del proyecto, obra o actividad"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('analisisAlternativas')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/analisisAlternativas/analisisAlternativas#{mode}.jsf">
                        <h:outputText value="Análisis de alternativas"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('areaInfluencia')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/areaInfluencia/areaInfluencia#{mode}.jsf?id=10">
                        <h:outputText value="Determinación del área influencia"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('inventarioForestal')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/inventarioForestal/inventarioForestal#{mode}.jsf?id=8">
                        <h:outputText value="Inventario Forestal"/>
                    </h:outputLink></li>
                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('identificacionEvaluacionImpactos')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/impactoAmbiental/identificacionEvaluacionImpactos#{mode}.jsf">
                        <h:outputText value="Identificación y evaluación de impactos"/>
                    </h:outputLink></li>

                    <li class="#{eia.proyectosBean.getProyecto().getTipoEstudio().getId() eq 2 ? '' : 'noShow'}">
                        <h:outputLink
                                class="text-red activo-#{eia.seccionCompletada('identificacionHallazgos')}"
                                rendered="#{!eia.seccionCompletada('identificacionHallazgos')}"
                                value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/identificacionHallazgos/identificacionHallazgos#{mode}.jsf?id=9">
                            <h:outputText value="Identificación de Hallazgos (ex-post)"/>
                        </h:outputLink></li>

                    <li class="#{eia.proyectosBean.getProyecto().getTipoEstudio().getId() eq 2 ? '' : 'noShow'}">
                        <h:outputLink
                                class="text-red activo-#{eia.seccionCompletada('planHallazgos')}"
                                rendered="#{!eia.seccionCompletada('planHallazgos')}"
                                value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/planHallazgos/planHallazgos#{mode}.jsf?id=19">
                            <h:outputText value="Plan de Acción Hallazgos (ex-post)"/>
                        </h:outputLink></li>

                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('analisisRiesgo')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/analisisRiesgo/analisisRiesgo#{mode}.jsf">
                        <h:outputText value="Análisis de riesgos"/>
                    </h:outputLink></li>

                    <li><h:outputLink class="text-red " rendered="#{!eia.seccionCompletada('planManejoAmbiental')}"
                                      value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/pma/planManejoAmbiental#{mode}.jsf?id=15">
                        <h:outputText value="Plan de manejo ambiental (PMA)"/>
                    </h:outputLink></li>

                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('planMonitoreo')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/planMonitoreo/planMonitoreo#{mode}.jsf?id=16">
                        <h:outputText value="Plan de monitoreo (PMA)"/>
                    </h:outputLink></li>

                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('cronogramaPma')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/pma/cronogramaPma#{mode}.jsf?id=17">
                        <h:outputText value="Cronograma valorado del PMA"/>
                    </h:outputLink></li>

                    <li><h:outputLink
                            class="text-red " rendered="#{!eia.seccionCompletada('anexos5')}"
                            value="#{request.contextPath}/prevencion/licenciamiento-ambiental/eia/anexos/anexos#{mode}.jsf?id=5">
                        <h:outputText value="Anexos"/>
                    </h:outputLink></li>

                </ul>


            </p:dialog>
            <p:remoteCommand process="@this" update="estudioIncompleto" rendered="#{!eia.completado}" autoRun="true"
                             oncomplete="PF('estudioIncompleto').show()"/>

            <div class="buttons main">
                <p:commandButton value="Enviar" update=":#{p:component('frmEnviar')}" icon="ui-icon-check"
                                 action="#{finalizarEIABean.enviarEstudio()}" process="@this" disabled="#{!eia.completado}" >
                    <p:confirm header="Confirmación"
                               message="¿Está seguro que desea enviar el estudio para su revisión?"
                               icon="ui-icon-alert"/>
                </p:commandButton>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
</html>